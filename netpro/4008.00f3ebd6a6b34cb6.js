"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[4008],{31849:(V,E,r)=>{r.d(E,{$:()=>t});var g=r(14085),b=r(87122),i=r(54438);const _=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],F=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];function C(p,k){1&p&&(i.j41(0,"div",0),i.SdG(1),i.k0s(),i.j41(2,"div",1),i.SdG(3,1),i.k0s())}function y(p,k){1&p&&(i.j41(0,"div",2),i.SdG(1,3),i.k0s()),2&p&&i.Y8G("@expandCollapse",void 0)}function v(p,k){if(1&p&&(i.SdG(0,2),i.DNE(1,y,2,1,"div",2)),2&p){const h=i.XpG();i.R7$(),i.vxM(h.expanded?1:-1)}}let t=(()=>{class p{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(h){"expanded"in h&&(this.expanded=(0,g.he)(h.expanded.currentValue)),"flippable"in h&&(this.flippable=(0,g.he)(h.flippable.currentValue))}static{this.\u0275fac=function(e){return new(e||p)}}static{this.\u0275cmp=i.VBU({type:p,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(e,U){2&e&&i.HbH(U.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],features:[i.OA$],ngContentSelectors:F,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],[1,"fuse-card-expansion"]],template:function(e,U){1&e&&(i.NAR(_),i.DNE(0,C,4,0)(1,v,2,1)),2&e&&(i.vxM(U.flippable?0:-1),i.R7$(),i.vxM(U.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:b.X}})}}return p})()},74008:(V,E,r)=>{r.r(E),r.d(E,{default:()=>te});var g=r(60177),b=r(89417),i=r(88834),_=r(30636),F=r(99213),C=r(59042),y=r(96695),v=r(2042),t=r(9159),p=r(49192),k=r(44742),h=r(10467),e=r(54438),U=r(31849),j=r(45794),D=r(59115),R=r(82798),S=r(82765),I=r(22080),M=r(25873),P=r(2951),N=r(46601),m=r(3366),x=r(75351),a=r(74157);const d=()=>({disableClose:!0}),c=()=>[5,10,20],w=n=>["view-detail",n];function G(n,f){if(1&n){const o=e.RV6();e.j41(0,"div",18)(1,"mat-checkbox",40),e.mxI("ngModelChange",function(s){const u=e.eBV(o).$implicit;return e.DH7(u.checked,s)||(u.checked=s),e.Njj(s)}),e.bIt("click",function(s){return e.eBV(o),e.Njj(s.stopPropagation())})("change",function(){e.eBV(o);const s=e.XpG();return e.Njj(s.applyFilterUserProfile())}),e.j41(2,"span",41),e.EFF(3),e.k0s()()()}if(2&n){const o=f.$implicit;e.R7$(),e.R50("ngModel",o.checked),e.R7$(2),e.JRh(o.name)}}function B(n,f){1&n&&(e.j41(0,"div",42),e.nrm(1,"div",43)(2,"div",43)(3,"div",43)(4,"div",43)(5,"div",43)(6,"div",43)(7,"div",44),e.k0s())}function A(n,f){1&n&&(e.j41(0,"div")(1,"div",45),e.nrm(2,"img",46),e.j41(3,"h1",47),e.EFF(4,"Data Not Found"),e.k0s()()())}function L(n,f){1&n&&(e.j41(0,"mat-header-cell",59),e.EFF(1," Name "),e.k0s())}function O(n,f){if(1&n&&(e.j41(0,"mat-cell",60)(1,"h1",61),e.EFF(2),e.k0s()()),2&n){const o=f.$implicit;e.R7$(2),e.JRh(o.name)}}function Y(n,f){1&n&&(e.j41(0,"mat-header-cell",59),e.EFF(1," Password "),e.k0s())}function W(n,f){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const o=f.$implicit;e.R7$(),e.SpI(" ",o.password,"")}}function X(n,f){1&n&&(e.j41(0,"mat-header-cell",59),e.EFF(1," Profile "),e.k0s())}function K(n,f){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const o=f.$implicit;e.R7$(),e.SpI(" ",o.profile," ")}}function H(n,f){1&n&&(e.j41(0,"mat-header-cell",59),e.EFF(1," Action "),e.k0s())}function J(n,f){if(1&n){const o=e.RV6();e.j41(0,"mat-cell",62)(1,"a",63),e.bIt("click",function(){const s=e.eBV(o).$implicit,u=e.XpG(2);return e.Njj(u.deleteUser(s.name))}),e.nrm(2,"mat-icon",64),e.k0s(),e.j41(3,"a",65),e.bIt("click",function(){const s=e.eBV(o).$implicit,u=e.XpG(2);return e.Njj(u.editUsers(s.name))}),e.nrm(4,"mat-icon",66),e.k0s(),e.j41(5,"a",67),e.nrm(6,"mat-icon",68),e.k0s()()}if(2&n){const o=f.$implicit;e.R7$(5),e.Y8G("routerLink",e.eq3(1,w,o.name))}}function z(n,f){1&n&&e.nrm(0,"mat-header-row")}function Q(n,f){1&n&&e.nrm(0,"mat-row")}function Z(n,f){if(1&n&&(e.j41(0,"mat-table",48,5),e.qex(2,49),e.DNE(3,L,2,0,"mat-header-cell",50)(4,O,3,1,"mat-cell",51),e.bVm(),e.qex(5,52),e.DNE(6,Y,2,0,"mat-header-cell",50)(7,W,2,1,"mat-cell",53),e.bVm(),e.qex(8,54),e.DNE(9,X,2,0,"mat-header-cell",50)(10,K,2,1,"mat-cell",53),e.bVm(),e.qex(11,55),e.DNE(12,H,2,0,"mat-header-cell",50)(13,J,7,3,"mat-cell",56),e.bVm(),e.DNE(14,z,1,0,"mat-header-row",57)(15,Q,1,0,"mat-row",58),e.k0s()),2&n){const o=e.XpG();e.Y8G("dataSource",o.dataSource),e.R7$(14),e.Y8G("matHeaderRowDef",o.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",o.displayedColumns)}}let q=(()=>{class n{constructor(o,l,s,u){this.fuseConfirmationService=o,this.apiService=l,this._matDialog=s,this._tableUserService=u,this.displayedColumns=["name","password","profile","action"],this.dataSource=new t.I6,this.isLoadingDelete=!1,this.toast=(0,e.WQX)(j.tw),this.filterValues={profile:[],search:""},this.profileItems=[],(0,e.QZP)(()=>{this.dataSource.data=this.user,this.isNotDataFound=this.isNotFound})}ngOnInit(){this._tableUserService.fetchData(),this.getProfile()}getProfile(){var o=this;return(0,h.A)(function*(){try{(yield o.apiService.get("/api/mikrotik/get-profile",!0)).profiles.map(s=>{o.profileItems.push({name:s.profile_name,checked:!1})})}catch{o.toast.error("Failed Fetch Data","Error")}})()}get user(){return this._tableUserService.hotspotUser()}set typeUser(o){this._tableUserService.typeUser.set(o)}get isLoading(){return this._tableUserService.isLoading()}get isNotFound(){return this._tableUserService.isNotFound()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}convertBytesToMB(o){return parseFloat(o)/1048576}calculateSpeed(o,l){return this.convertBytesToMB(o)/l*8}addNewUsers(o){this.typeUser=o,this._matDialog.open(M.X,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}editUsers(o){var l=this;return(0,h.A)(function*(){yield l._tableUserService.fetchDataByName(o),l._matDialog.open(P.I,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})})()}deleteUser(o){this.fuseConfirmationService.open({title:"Konfirmasi Hapus",message:`Apakah Anda yakin ingin menghapus akun ${o}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(s=>{"confirmed"===s&&this.deleteUserByPhone(o)})}deleteUserByPhone(o){var l=this;return(0,h.A)(function*(){try{l.isLoadingDelete=!0,"Hotspot user deleted successfully"===(yield l.apiService.delete(`/api/mikrotik/deleteExpiredHotspotUsersByPhone/${o}`,!0)).message&&(l.toast.error("Delete User Succesfully","Delete User"),l._tableUserService.fetchData(),l.isLoadingDelete=!1)}catch(s){throw l.toast.error("Error Delete Users","Delete User"),l.isLoadingDelete=!1,s}})()}applyFilter(){this.dataSource.filterPredicate=(o,l)=>{let s=JSON.parse(l),u=""===s.search||o.name.toLowerCase().includes(s.search)||o.profile.toLowerCase().includes(s.search),T=0===s.profile.length||s.profile.includes(o.profile.toLowerCase());return u&&T},this.dataSource.filter=JSON.stringify(this.filterValues),this.isNotDataFound=0===this.dataSource.filteredData.length}applySearchFilter(o){this.filterValues.search=o.trim().toLowerCase(),this.applyFilter()}applyFilterUserProfile(){this.filterValues.profile=this.profileItems.filter(o=>o.checked).map(o=>o.name.toLowerCase()),this.applyFilter()}static{this.\u0275fac=function(l){return new(l||n)(e.rXU(N.G),e.rXU(m.G),e.rXU(x.bZ),e.rXU(a.w))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-table-users"]],viewQuery:function(l,s){if(1&l&&(e.GBs(y.iy,5),e.GBs(v.B4,5)),2&l){let u;e.mGM(u=e.lsd())&&(s.paginator=u.first),e.mGM(u=e.lsd())&&(s.sort=u.first)}},decls:53,vars:18,consts:[["fuseCard",""],["addUserMenu","matMenu"],["menu","matMenu"],["products","matMenu"],["paginator",""],["table",""],["message","Delete Users...","spinner","circular",3,"isOpen"],[1,"my-4","mb-10"],[1,"flex","flex-col","shadow-md","border-[1px]"],[1,"truncate","text-lg","flex-col","sm:flex-row","font-medium","leading-6","tracking-tight","px-5","py-3","flex","items-start","sm:items-center","w-full","justify-between"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Vouchers",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup","disabled"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],[1,"flex","items-center","gap-2","flex-row","mt-2"],[1,"flex","items-center","gap-2"],["mat-flat-button","","color","primary",1,"flex","items-center","gap-2",3,"disabled","matMenuTriggerFor"],["svgIcon","person_add_alt_1",1,"icon-size-5"],[1,"flex","items-center","gap-1"],[1,"m-2","pr-4","border-r-[1px]"],["svgIcon","keyboard_arrow_down",1,"font-bold","text-2xl"],["mat-menu-item","",3,"click"],["svgIcon","group_add",1,"icon-size-5"],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor","disabled"],["svgIcon","filter_alt"],[1,"max-sm:hidden","text-base","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"px-5","py-3"],[1,"font-semibold","mb-2"],[1,"px-5","py-2","min-w-[200px]"],["class","flex items-center gap-2",4,"ngFor","ngForOf"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap"],["matSort","","class","min-w-180",3,"dataSource",4,"ngIf"],[3,"pageSize","length","pageSizeOptions","showFirstLastButtons"],[1,"w-full",3,"ngModelChange","click","change","ngModel"],[1,"truncate","block"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","../../../../../assets/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-180",3,"dataSource"],["matColumnDef","name"],["mat-sort-header","",4,"matHeaderCellDef"],["class","py-2",4,"matCellDef"],["matColumnDef","password"],[4,"matCellDef"],["matColumnDef","profile"],["matColumnDef","action"],["class","px-2 sm:px-6 flex items-center",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header",""],[1,"py-2"],[1,"text-base","font-medium"],[1,"px-2","sm:px-6","flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-slate-500","hover:bg-slate-600","rounded","hover:underline",3,"routerLink"],["svgIcon","heroicons_solid:eye",1,"text-white",2,"transform","scale(0.7)"]],template:function(l,s){if(1&l){const u=e.RV6();e.nrm(0,"ion-loading",6),e.j41(1,"main",7)(2,"fuse-card",8,0)(4,"div",9)(5,"label",10),e.EFF(6,"Search"),e.k0s(),e.j41(7,"div",11)(8,"div",12),e.qSk(),e.j41(9,"svg",13),e.nrm(10,"path",14),e.k0s()(),e.joV(),e.j41(11,"input",15),e.bIt("keyup",function($){return e.eBV(u),e.Njj(s.applySearchFilter($.target.value))}),e.k0s()(),e.j41(12,"div",16)(13,"div",17)(14,"div",18)(15,"button",19),e.nrm(16,"mat-icon",20),e.j41(17,"div",21)(18,"span",22),e.EFF(19,"Add Account"),e.k0s(),e.nrm(20,"mat-icon",23),e.k0s()()(),e.j41(21,"mat-menu",null,1)(23,"button",24),e.bIt("click",function(){return e.eBV(u),e.Njj(s.addNewUsers("User"))}),e.nrm(24,"mat-icon",20),e.j41(25,"span"),e.EFF(26,"Add User"),e.k0s()(),e.j41(27,"button",24),e.bIt("click",function(){return e.eBV(u),e.Njj(s.addNewUsers("Multiple"))}),e.nrm(28,"mat-icon",25),e.j41(29,"span"),e.EFF(30,"Add Multiple"),e.k0s()()(),e.j41(31,"button",26),e.nrm(32,"mat-icon",27),e.j41(33,"span",28),e.EFF(34,"Filter"),e.k0s(),e.nrm(35,"mat-icon",29),e.k0s()(),e.j41(36,"mat-menu",null,2)(38,"button",30),e.EFF(39,"User Profile"),e.k0s(),e.j41(40,"mat-menu",null,3)(42,"div",31)(43,"h1",32),e.EFF(44,"Choose User Profile"),e.k0s()(),e.j41(45,"div",33),e.DNE(46,G,4,2,"div",34),e.k0s()()()()(),e.DNE(47,B,8,0,"div",35)(48,A,5,0,"div",36),e.j41(49,"div",37),e.DNE(50,Z,16,3,"mat-table",38),e.k0s(),e.nrm(51,"mat-paginator",39,4),e.k0s()()}if(2&l){const u=e.sdS(22),T=e.sdS(37),$=e.sdS(41);e.Y8G("isOpen",s.isLoadingDelete),e.R7$(11),e.Y8G("disabled",s.isLoading),e.R7$(4),e.Y8G("disabled",s.isLoading||s.isNotFound)("matMenuTriggerFor",u),e.R7$(16),e.Y8G("matMenuTriggerFor",T)("disabled",s.isLoading||s.isNotFound),e.R7$(7),e.Y8G("matMenuTriggerFor",$)("matMenuTriggerData",e.lJ4(16,d)),e.R7$(8),e.Y8G("ngForOf",s.profileItems),e.R7$(),e.Y8G("ngIf",s.isLoading),e.R7$(),e.Y8G("ngIf",s.isNotDataFound&&!s.isLoading),e.R7$(2),e.Y8G("ngIf",!s.isLoading&&!s.isNotDataFound),e.R7$(),e.Y8G("pageSize",10)("length",s.dataSource.data.length)("pageSizeOptions",e.lJ4(17,c))("showFirstLastButtons",!0)}},dependencies:[g.MD,g.Sq,g.bT,i.Hl,i.$z,C.fS,C.fg,v.NQ,v.B4,v.aE,y.Ou,y.iy,t.tP,t.Zl,t.tL,t.ji,t.cC,t.YV,t.iL,t.KS,t.$R,t.YZ,t.NB,F.m_,F.An,p.Wk,U.$,D.Cn,D.kk,D.fb,D.Cp,R.Ve,S.g7,S.So,b.YN,b.BC,b.vS,I.rQ],encapsulation:2})}}return n})();const ee=()=>[".."],te=[{path:"",component:(()=>{class n{static{this.\u0275fac=function(l){return new(l||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-customer"]],decls:8,vars:2,consts:[[1,"w-full","h-fit","mb-10","flex","flex-col"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"w-full","px-4"]],template:function(l,s){1&l&&(e.j41(0,"main",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e.EFF(5," Hotspot Users "),e.k0s()()()(),e.j41(6,"div",5),e.nrm(7,"app-table-users"),e.k0s()()),2&l&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(1,ee)))},dependencies:[k.bv,k.oY,g.MD,i.Hl,p.Wk,y.Ou,_.RG,t.tP,F.m_,C.fS,v.NQ,b.X1,q],encapsulation:2})}}return n})()},{path:"view-detail/:name",loadChildren:()=>r.e(7617).then(r.bind(r,17617))},{path:"add-user",loadChildren:()=>r.e(5982).then(r.bind(r,65982))},{path:"edit-user/:name",loadChildren:()=>r.e(6816).then(r.bind(r,96816))}]},25873:(V,E,r)=>{r.d(E,{X:()=>N});var g=r(10467),b=r(60177),i=r(89417),_=r(30636),F=r(99213),C=r(59042),y=r(22080),v=r(75351),t=r(54438),p=r(70600),k=r(49192),h=r(3366),e=r(45794),U=r(46601),j=r(74157);function D(m,x){1&m&&(t.j41(0,"mat-error"),t.EFF(1,"Unique Id Voucher Required"),t.k0s())}function R(m,x){1&m&&(t.j41(0,"mat-error"),t.EFF(1,"Invalid NIK/Phone Id format (must be 10-12 digits)"),t.k0s())}function S(m,x){if(1&m&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&m){const a=x.$implicit;t.Y8G("value",a.profile_name),t.R7$(),t.SpI(" ",a.profile_name," ")}}function I(m,x){if(1&m&&(t.j41(0,"mat-form-field",9)(1,"mat-label"),t.EFF(2,"Unique Id Voucher"),t.k0s(),t.nrm(3,"input",10),t.DNE(4,D,2,0,"mat-error",11)(5,R,2,0,"mat-error",11),t.k0s(),t.j41(6,"mat-form-field",12)(7,"mat-label"),t.EFF(8,"User Profiles"),t.k0s(),t.j41(9,"select",13)(10,"option",14),t.EFF(11," -----Select User Profiles----- "),t.k0s(),t.DNE(12,S,2,2,"option",15),t.k0s(),t.nrm(13,"mat-icon",16),t.k0s()),2&m){let a,d;const c=t.XpG();t.R7$(3),t.Y8G("placeholder","Unique Id Voucher"),t.R7$(),t.Y8G("ngIf",null==(a=c.userForm.get("no_hp"))?null:a.hasError("required")),t.R7$(),t.Y8G("ngIf",null==(d=c.userForm.get("no_hp"))?null:d.hasError("pattern")),t.R7$(7),t.Y8G("ngForOf",c.roleDatas),t.R7$(),t.Y8G("svgIcon","heroicons_solid:map-pin")}}function M(m,x){if(1&m&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&m){const a=x.$implicit;t.Y8G("value",a.profile_name),t.R7$(),t.SpI(" ",a.profile_name," ")}}function P(m,x){if(1&m&&(t.j41(0,"mat-form-field",9)(1,"mat-label"),t.EFF(2,"Floor"),t.k0s(),t.nrm(3,"input",18),t.k0s(),t.j41(4,"mat-form-field",9)(5,"mat-label"),t.EFF(6,"Number of Rooms"),t.k0s(),t.nrm(7,"input",19),t.k0s(),t.j41(8,"mat-form-field",12)(9,"mat-label"),t.EFF(10,"User Profiles"),t.k0s(),t.j41(11,"select",13)(12,"option",14),t.EFF(13," -----Select User Profiles----- "),t.k0s(),t.DNE(14,M,2,2,"option",15),t.k0s(),t.nrm(15,"mat-icon",16),t.k0s()),2&m){const a=t.XpG();t.R7$(3),t.Y8G("placeholder","Choose Your Floor"),t.R7$(4),t.Y8G("placeholder","Number of Rooms"),t.R7$(7),t.Y8G("ngForOf",a.roleDatas),t.R7$(),t.Y8G("svgIcon","heroicons_solid:map-pin")}}let N=(()=>{class m{constructor(a,d,c,w,G,B,A,L,O){this.platform=a,this.router=d,this.fb=c,this._apiService=w,this._toast=G,this.fuseConfirmationService=B,this._tableUsersService=A,this.dialogRef=L,this.data=O,this.roleDatas=[],this.isLoading=!1}ngOnInit(){this.getRole(),"User"===this.typeUser?this.userForm=this.fb.group({no_hp:["",[i.k0.required]],profile:["",i.k0.required]}):"Multiple"===this.typeUser&&(this.userForm=this.fb.group({lantai:["",[i.k0.required]],jumlah_kamar:["",[i.k0.required]],profile:["",i.k0.required]})),this.platform.backButton.subscribeWithPriority(10,()=>{this.router.navigate(["/dashboard/customer"])})}get typeUser(){return this._tableUsersService.typeUser()}onNoClick(){this.dialogRef.close()}getRole(){var a=this;return(0,g.A)(function*(){const d=yield a._apiService.get("/api/mikrotik/get-profile",!0);a.roleDatas=d.profiles})()}onSubmit(){var a=this;return(0,g.A)(function*(){if(a.userForm.invalid)a._toast.error("Please Fill in All Required Fields","Error");else try{if(a.isLoading=!0,"User"===a.typeUser){const d=yield a._apiService.post("/api/mikrotik/add-Hotspot-User",a.userForm.value);("User baru ditambahkan tanpa expiry time."===d.message||201===d.status)&&(a.userForm.reset(),a.userForm.disable(),setTimeout(()=>{a.userForm.enable()},2e3),a._toast.success("Form submitted successfully!","Success"),a._tableUsersService.fetchData(),a.dialogRef.close()),500===d.status?a._toast.error("Internal Server Error","Error"):409===d.status&&a.fuseConfirmationService.open({title:"Notification",message:"The user already exists on the server. Would you like to create another user anyway?",icon:{color:"error"},actions:{confirm:{label:"Confirmation",color:"warn"}}})}else if("Multiple"===a.typeUser){const d={lantai:a.userForm.value.lantai.toString(),jumlah_kamar:a.userForm.value.jumlah_kamar.toString(),profile:a.userForm.value.profile},c=yield a._apiService.post("/api/mikrotik/add-Multiple-user",d);"Voucher berhasil dibuat."===c.message?(a.userForm.reset(),a.userForm.disable(),setTimeout(()=>{a.userForm.enable()},2e3),a._toast.success("Form submitted successfully!","Success"),a._tableUsersService.fetchData(),a.dialogRef.close()):"Voucher berhasil dibuat, namun beberapa username sudah ada."===c.message&&(a.userForm.reset(),a.userForm.disable(),setTimeout(()=>{a.userForm.enable()},2e3),a._toast.info("Voucher Successfully Created, But Some Usernames Already Exist","Success"),a._tableUsersService.fetchData(),a.dialogRef.close()),500===c.status?a._toast.error("Internal Server Error","Error"):409===c.status&&a.fuseConfirmationService.open({title:"Notification",message:"The user already exists on the server. Would you like to create another user anyway?",icon:{color:"error"},actions:{confirm:{label:"Confirmation",color:"warn"}}})}}catch{a._toast.error("Failed to submit form","Error"),a.isLoading=!1}finally{a.isLoading=!1}})()}preventInvalidChars(a){a.target.value=a.target.value.replace(/[^0-9]/g,"")}static{this.\u0275fac=function(d){return new(d||m)(t.rXU(p.OD),t.rXU(k.Ix),t.rXU(i.ok),t.rXU(h.G),t.rXU(e.tw),t.rXU(U.G),t.rXU(j.w),t.rXU(v.CP),t.rXU(v.Vh))}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-form-add"]],decls:13,vars:4,consts:[[1,"h-full","w-full"],[1,"flex","justify-between","p-2"],[1,"text-xl","font-semibold","uppercase","opacity-50"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,"px-3"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","py-4","pb-4",3,"formGroup"],[1,"bg-green-600","text-white","p-2","rounded",3,"click"],["floatLabel","always",1,"w-full","mb-2"],["matInput","","formControlName","no_hp","type","text",3,"placeholder"],[4,"ngIf"],[1,"gt-xs:pr-3","mb-2","flex-auto"],["matNativeControl","","formControlName","profile"],["disabled",""],[3,"value",4,"ngFor","ngForOf"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[3,"value"],["matInput","","formControlName","lantai","type","number",3,"placeholder"],["matInput","","formControlName","jumlah_kamar","type","number",3,"placeholder"]],template:function(d,c){1&d&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3),t.k0s(),t.j41(4,"a",3),t.bIt("click",function(){return c.onNoClick()}),t.nrm(5,"mat-icon",4),t.k0s()(),t.nrm(6,"ion-loading",5),t.j41(7,"div",6)(8,"form",7),t.DNE(9,I,14,5)(10,P,16,4),t.j41(11,"button",8),t.bIt("click",function(){return c.onSubmit()}),t.EFF(12," Add Users "),t.k0s()()()()),2&d&&(t.R7$(3),t.JRh("Multiple"==c.typeUser?"Add Multiple":"Add Account"),t.R7$(3),t.Y8G("isOpen",c.isLoading),t.R7$(2),t.Y8G("formGroup",c.userForm),t.R7$(),t.vxM("User"===c.typeUser?9:"Multiple"===c.typeUser?10:-1))},dependencies:[_.RG,_.rl,_.nJ,_.TL,_.JW,i.YN,i.qT,i.xH,i.y7,i.me,i.Q0,i.wz,i.BC,i.cb,C.fS,C.fg,i.X1,i.j4,i.JD,b.MD,b.Sq,b.bT,F.m_,F.An,y.rQ],encapsulation:2})}}return m})()}}]);