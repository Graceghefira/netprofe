"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3685],{3685:(L,y,n)=>{n.r(y),n.d(y,{default:()=>z});var f=n(10467),v=n(60177),l=n(89417),D=n(88834),m=n(25084),u=n(30636),b=n(99213),x=n(96695),w=n(90882),j=n(31849),B=n(89107),C=n(34941),E=n.n(C),t=n(54438),P=n(40711),R=n(25798),M=n(80507),U=n(3366),$=n(45794);const I=["drawer"],G=()=>[1,5,10,25];function T(d,S){if(1&d&&(t.j41(0,"div",44)(1,"p")(2,"strong"),t.EFF(3,"Nama User Profile:"),t.k0s(),t.EFF(4),t.k0s(),t.j41(5,"p")(6,"strong"),t.EFF(7,"Pembagian User:"),t.k0s(),t.EFF(8),t.k0s(),t.j41(9,"p")(10,"strong"),t.EFF(11,"Upload / Download:"),t.k0s(),t.EFF(12),t.k0s()()),2&d){const a=t.XpG();t.R7$(4),t.SpI(" ",a.selectedUser.profile_name,""),t.R7$(4),t.SpI(" ",a.selectedUser.shared_users,""),t.R7$(4),t.SpI(" ",a.selectedUser.rate_limit,"")}}function Y(d,S){if(1&d){const a=t.RV6();t.j41(0,"tr",45),t.bIt("click",function(){t.eBV(a);const r=t.XpG();return t.Njj(r.openDrawer(r.roleData.profile_name))}),t.j41(1,"th",46)(2,"div",47)(3,"div",48),t.EFF(4),t.k0s(),t.j41(5,"div",49),t.EFF(6),t.k0s()()(),t.j41(7,"td",50),t.EFF(8),t.k0s(),t.j41(9,"td",50),t.EFF(10),t.k0s(),t.j41(11,"td",50),t.EFF(12),t.k0s(),t.j41(13,"td",50),t.EFF(14),t.k0s()()}if(2&d){const a=S.$implicit,e=t.XpG();t.R7$(4),t.JRh(a.user_name),t.R7$(2),t.JRh(a.user_name),t.R7$(2),t.SpI(" ",a.role," "),t.R7$(2),t.SpI(" ",e.convertBytesToMB(a.total_bytes_in).toFixed(2)," MB/s "),t.R7$(2),t.SpI(" ",e.convertBytesToMB(a.total_bytes_out).toFixed(2)," MB/s "),t.R7$(2),t.SpI(" ",e.convertBytesToMB(a.total_user_bytes).toFixed(2)," MB/s ")}}const F=new Date,k=F.getMonth(),N=F.getFullYear(),z=(F.getDay(),[{path:"",component:(()=>{class d{constructor(a,e,r,s,o,i){this.bandwithService=a,this.userService=e,this.fuseLoadingService=r,this.cdr=s,this._apiService=o,this._toastService=i,this.range=new l.gE({start:new l.MJ(new Date(N,k-1)),end:new l.MJ(new Date)}),this.drawerMode="side",this.drawerOpened=!0,this.pagedRoleDatas=[],this.userDatas=[],this.pageSize=5,this.currentPage=1,this.selectedUser=null,this.totalBandwidthMax=1e9,this.startDates=new Date(k-1).toLocaleDateString("en-CA"),this.endDates=(new Date).toLocaleDateString("en-CA"),this.range.get("end")?.valueChanges.subscribe(c=>{const g=this.range.get("start")?.value;if(g&&c){const p=g instanceof Date?g:new Date(g),h=c instanceof Date?c:new Date(c);this.startDates=p.toLocaleDateString("en-CA"),this.endDates=h.toLocaleDateString("en-CA"),this.fetcData(this.currentPage,this.startDates,this.endDates),console.log(this.startDates,this.endDates)}})}getFormattedDateTime(){const a=new Date,e=p=>p<10?"0"+p:p;return`${a.getFullYear()} - ${e(a.getMonth()+1)} - ${e(a.getDate())} ${e(a.getHours())}.${e(a.getMinutes())}.${e(a.getSeconds())}`}updateTimeRealTime(){setInterval(()=>{this.timeNow=this.getFormattedDateTime(),this.cdr.detectChanges()},100)}ngOnInit(){try{this.fuseLoadingService.show(),this.totalUser="Memuat Data ",this.totalUserBandwith="Memuat Data ",this.fetcData(this.currentPage,this.startDates,this.endDates),this.updateTimeRealTime(),this.cdr.detectChanges(),console.log(this.currentPage)}catch(a){throw this.fuseLoadingService.hide(),this._toastService.error("Internal Server Error","Error Fetch Data()"),a}finally{this.fuseLoadingService.hide()}}fetcData(a,e,r){var s=this;return(0,f.A)(function*(){const o=yield s._apiService.post(`/api/mikrotik/get-data-by-date-pagi?page=${a}`,{startDate:e,endDate:r});console.log(o),s.userDatas=o.users,s.totalUser=o.pagination.total,s.totalUserBandwith=o.total_user,s.total_pages=o.pagination.last_page,s.cdr.detectChanges(),s.updatePagedData(),s.fuseLoadingService.hide()})()}updatePagedData(){const a=(this.currentPage-1)*this.pageSize;this.pagedRoleDatas=this.userDatas.slice(a,a+this.pageSize),this.cdr.detectChanges()}handlePage(a){var e=this;return(0,f.A)(function*(){e.pageSize=a.pageSize,e.currentPage=a.pageIndex+1,yield e.fetcData(e.currentPage,e.startDates,e.endDates),e.cdr.detectChanges()})()}generatePdf(){var a=this;return(0,f.A)(function*(){const e=new B.default;e.setFont("Inter"),e.addImage("../../../../../../assets/img/netpro-logo.png","PNG",10,10,50,20),e.setFontSize(8),e.text("adhivasindo.co.id   022-7508499   admin@adhivasindo.co.id",125,15),e.text("Jln. Edelweiss CRC 011 Ruko Crystal Summarecon ",135,20),e.text("Kec.Gedebage  Kota Bandung  ",160,25),e.setLineWidth(.5),e.line(10,30,200,30);let i=40;e.setFontSize(16),e.setFont("Inter","bold"),e.text("Laporan Penggunaan Bandwidth",65,i),e.setFont("Inter");const c=yield a.userService.getAllUser();e.setFontSize(12),i+=10,e.text("A. Data Hotspot User",14,i);const g=c.users.map((h,A)=>[A+1,h.name,`${a.convertBytesToMB(h["total-bytes"]).toFixed(2)} MB/s`,h.uptime]);i+=5,E()(e,{head:[["No","Nama Akun","Total Bandwidth","Waktu Pemakaian"]],body:g,startY:i,styles:{lineWidth:.5,lineColor:[0,0,0],cellPadding:2},headStyles:{fillColor:[200,200,200],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]},didParseCell:h=>{h.cell.styles.lineWidth=.5,h.cell.styles.lineColor=[0,0,0]}});const p=e.internal.pageSize.getHeight()-30;e.addImage("../../../../../assets/img/footer-pdf.png","PNG",0,p,e.internal.pageSize.getWidth(),30),e.save("laporan_dengan_point_dan_tabel.pdf")})()}getBarColor(a){return a<50?"green":a>=50&&a<80?"orange":"red"}convertBytesToMB(a){return parseFloat(a)/1048576}calculatePercentage(a){return a/this.totalBandwidthMax*100}static{this.\u0275fac=function(e){return new(e||d)(t.rXU(P.P),t.rXU(R.D),t.rXU(M.X),t.rXU(t.gRc),t.rXU(U.G),t.rXU($.tw))}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["app-bandwith-profile"]],viewQuery:function(e,r){if(1&e&&(t.GBs(x.iy,5),t.GBs(I,5)),2&e){let s;t.mGM(s=t.lsd())&&(r.paginator=s.first),t.mGM(s=t.lsd())&&(r.drawer=s.first)}},decls:74,vars:11,consts:[["drawer",""],["fuseCard",""],["picker",""],[1,"absolute","inset-0","flex","min-w-0","flex-col","overflow-hidden","pb-10"],[1,"h-full"],["mode","side",1,"md:w-1/2","lg:w-1/4","w-full"],[1,"bg-slate-700","h-[30svh]","relative"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],["mat-button","",1,"text-white","font-bold","absolute","right-0",3,"click"],["svgIcon","close",1,"text-white","font-bold"],["class","p-3",4,"ngIf"],[1,"h-full","p-4","overflow-y-scroll"],[1,"grid-cols-1","sm:grid-cols-2","grid","gap-6","px-3"],[1,"flex","flex-col","px-8","py-6","pb-4","shadow-lg"],[1,"my-5","bg-neutral-100","p-6","rounded-lg"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],[1,"grid","grid-cols-1","gap-3"],[1,"text-xl","font-bold"],[1,"mt-2"],[1,"font-medium"],[1,"flex","flex-col","px-8","py-6","pb-4","shadow-lg","bg-slate-800","text-white"],[1,"p-3","overflow-y-hidden"],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","h-fit","w-full","p-4","shadow-lg","sm:col-span-6"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-4","flex","flex-col","sm:flex-row","sm:items-center","items-start","w-full","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3"],["for","table-search",1,"sr-only"],[1,"relative","my-2"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","id","table-search-users","placeholder","Search users",1,"block","p-2","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"py-2","sm:px-4","overflow-y-hidden"],[1,"relative","overflow-x-auto","sm:rounded-lg","max-h-[60svh]"],[1,"w-full","h-fit","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","dark:text-gray-400"],["scope","col",1,"px-5","py-3","text-xs","sm:text-sm"],["class","hover:bg-neutral-200 transition-all",3,"click",4,"ngFor","ngForOf"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],[1,"p-3"],[1,"hover:bg-neutral-200","transition-all",3,"click"],["scope","row",1,"flex","items-center","px-5","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"max-sm:pr-4"],[1,"text-base","font-semibold"],[1,"font-normal","text-gray-500"],[1,"px-2","sm:px-5","py-4","text-sm","sm:text-sm"]],template:function(e,r){if(1&e){const s=t.RV6();t.j41(0,"div",3)(1,"mat-sidenav-container",4)(2,"mat-sidenav",5,0)(4,"div",6),t.qSk(),t.j41(5,"svg",7)(6,"g",8),t.nrm(7,"circle",9)(8,"circle",10),t.k0s()(),t.joV(),t.j41(9,"button",11),t.bIt("click",function(){t.eBV(s);const i=t.sdS(3);return t.Njj(i.close())}),t.nrm(10,"mat-icon",12),t.k0s()(),t.j41(11,"h2"),t.EFF(12,"Detail Pengguna"),t.k0s(),t.DNE(13,T,13,3,"div",13),t.k0s(),t.j41(14,"mat-sidenav-content",14)(15,"div",15)(16,"fuse-card",16,1)(18,"mat-form-field",17)(19,"mat-label"),t.EFF(20,"Enter a date range"),t.k0s(),t.j41(21,"mat-date-range-input",18),t.nrm(22,"input",19)(23,"input",20),t.k0s(),t.j41(24,"mat-hint"),t.EFF(25,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.k0s(),t.nrm(26,"mat-datepicker-toggle",21)(27,"mat-date-range-picker",null,2),t.k0s()(),t.j41(29,"div",22)(30,"fuse-card",16,1)(32,"div",23),t.EFF(33,"Total User"),t.k0s(),t.j41(34,"div",24)(35,"p",25),t.EFF(36),t.k0s()()(),t.j41(37,"fuse-card",26,1)(39,"div",23),t.EFF(40,"Time Now"),t.k0s(),t.j41(41,"div",24)(42,"p",25),t.EFF(43),t.k0s()()()()(),t.j41(44,"section",27)(45,"div",28)(46,"div",29),t.EFF(47," User Bandwith "),t.j41(48,"div",30)(49,"label",31),t.EFF(50,"Search"),t.k0s(),t.j41(51,"div",32)(52,"div",33),t.qSk(),t.j41(53,"svg",34),t.nrm(54,"path",35),t.k0s()(),t.joV(),t.nrm(55,"input",36),t.k0s()()(),t.j41(56,"div",37)(57,"div",38)(58,"table",39)(59,"thead",40)(60,"tr")(61,"th",41),t.EFF(62," Name "),t.k0s(),t.j41(63,"th",41),t.EFF(64," Role "),t.k0s(),t.j41(65,"th",41),t.EFF(66," Upload "),t.k0s(),t.j41(67,"th",41),t.EFF(68," Download "),t.k0s(),t.j41(69,"th",41),t.EFF(70," Total Bandwith "),t.k0s()()(),t.j41(71,"tbody"),t.DNE(72,Y,15,6,"tr",42),t.k0s()()()(),t.j41(73,"mat-paginator",43),t.bIt("page",function(i){return t.eBV(s),t.Njj(r.handlePage(i))}),t.k0s()()()()()()}if(2&e){const s=t.sdS(28);t.R7$(13),t.Y8G("ngIf",r.selectedUser),t.R7$(8),t.Y8G("rangePicker",s)("formGroup",r.range),t.R7$(5),t.Y8G("for",s),t.R7$(10),t.SpI("",r.totalUser," User"),t.R7$(7),t.JRh(r.timeNow),t.R7$(29),t.Y8G("ngForOf",r.userDatas),t.R7$(),t.Y8G("length",r.total_pages)("pageSize",1)("pageSizeOptions",t.lJ4(10,G))}},dependencies:[b.An,D.Hl,D.$z,w.LG,w.US,w.El,v.MD,v.Sq,v.bT,j.$,x.Ou,x.iy,m.X6,m.bU,m.el,m.xR,m.IG,m.SG,u.RG,u.rl,u.nJ,u.MV,u.yw,l.YN,l.me,l.BC,l.cb,l.X1,l.j4,l.JD],encapsulation:2,changeDetection:0})}}return d})()}])}}]);