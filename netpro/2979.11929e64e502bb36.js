"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[2979],{31849:(x,p,o)=>{o.d(p,{$:()=>w});var f=o(14085),u=o(87122),a=o(54438);const m=[[["","fuseCardFront",""]],[["","fuseCardBack",""]],"*",[["","fuseCardExpansion",""]]],h=["[fuseCardFront]","[fuseCardBack]","*","[fuseCardExpansion]"];function v(e,l){1&e&&(a.j41(0,"div",0),a.SdG(1),a.k0s(),a.j41(2,"div",1),a.SdG(3,1),a.k0s())}function g(e,l){1&e&&(a.j41(0,"div",2),a.SdG(1,3),a.k0s()),2&e&&a.Y8G("@expandCollapse",void 0)}function b(e,l){if(1&e&&(a.SdG(0,2),a.DNE(1,g,2,1,"div",2)),2&e){const r=a.XpG();a.R7$(),a.vxM(r.expanded?1:-1)}}let w=(()=>{class e{constructor(){this.expanded=!1,this.face="front",this.flippable=!1}get classList(){return{"fuse-card-expanded":this.expanded,"fuse-card-face-back":this.flippable&&"back"===this.face,"fuse-card-face-front":this.flippable&&"front"===this.face,"fuse-card-flippable":this.flippable}}ngOnChanges(r){"expanded"in r&&(this.expanded=(0,f.he)(r.expanded.currentValue)),"flippable"in r&&(this.flippable=(0,f.he)(r.flippable.currentValue))}static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275cmp=a.VBU({type:e,selectors:[["fuse-card"]],hostVars:2,hostBindings:function(d,c){2&d&&a.HbH(c.classList)},inputs:{expanded:"expanded",face:"face",flippable:"flippable"},exportAs:["fuseCard"],features:[a.OA$],ngContentSelectors:h,decls:2,vars:2,consts:[[1,"fuse-card-front"],[1,"fuse-card-back"],[1,"fuse-card-expansion"]],template:function(d,c){1&d&&(a.NAR(m),a.DNE(0,v,4,0)(1,b,2,1)),2&d&&(a.vxM(c.flippable?0:-1),a.R7$(),a.vxM(c.flippable?-1:1))},styles:["fuse-card{position:relative;display:flex;overflow:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable{border-radius:0;overflow:visible;transform-style:preserve-3d;transition:transform 1s;perspective:600px;background:transparent;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-front{visibility:hidden;opacity:0;transform:rotateY(180deg)}fuse-card.fuse-card-flippable.fuse-card-face-back .fuse-card-back{visibility:visible;opacity:1;transform:rotateY(360deg)}fuse-card.fuse-card-flippable .fuse-card-front,fuse-card.fuse-card-flippable .fuse-card-back{display:flex;flex-direction:column;flex:1 1 auto;z-index:10;transition:transform .5s ease-out 0s,visibility 0s ease-in .2s,opacity 0s ease-in .2s;backface-visibility:hidden;--tw-bg-opacity: 1;background-color:rgba(var(--fuse-bg-card-rgb),var(--tw-bg-opacity));border-radius:1rem;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}fuse-card.fuse-card-flippable .fuse-card-front{position:relative;opacity:1;visibility:visible;transform:rotateY(0);overflow:hidden}fuse-card.fuse-card-flippable .fuse-card-back{position:absolute;inset:0;opacity:0;visibility:hidden;transform:rotateY(180deg);overflow:hidden auto}\n"],encapsulation:2,data:{animation:u.X}})}}return e})()},72979:(x,p,o)=>{o.r(p),o.d(p,{default:()=>M});var f=o(10467),u=o(88834),a=o(99213),m=o(31849),h=o(44742),v=o(60177),g=o(74950),b=o(90882),w=o(21413),e=o(54438),l=o(77502),r=o(95084),d=o(45794),c=o(84412),F=o(25798);let y=(()=>{class n{constructor(i){this.userService=i,this.apiUrl=l.c.apiUrl,this.toast=(0,e.WQX)(d.tw),this._deviceSubject=new c.t([]),this.device$=this._deviceSubject.asObservable(),this.initMqtt()}initMqtt(){this.client=r.A.connect("wss://netpro.awh.co.id:8083/mqtt",{username:l.c.mqtt.username,password:l.c.mqtt.password}),this.client.on("connect",()=>{console.log("MQTT connected"),this.userService.topic$.subscribe(i=>{this.client.subscribe(`${"Netpro"===i?"mikrotik":i}/get-device`,t=>{t&&(console.error("Failed to subscribe:",t),this.toast.error(t.message,"Error Subscribing"))})})}),this.client.on("message",(i,t)=>{this.userService.topic$.subscribe(s=>{i===`${"Netpro"===s?"mikrotik":s}/get-device`&&this.handleHotspotProfileMessage(t.toString())})}),this.client.on("close",()=>{console.warn("MQTT connection closed, attempting to reconnect..."),setTimeout(()=>{this.client.reconnect()},1e3)})}handleHotspotProfileMessage(i){try{const t=JSON.parse(i);this._deviceSubject.next(t)}catch(t){console.error("Error parsing message:",t),this.toast.error("Invalid data received","Error")}}disconnect(){this.client&&this.client.end(!0)}static{this.\u0275fac=function(t){return new(t||n)(e.KVO(F.D))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var C=o(3366);(0,g.u2)(window);const M=[{path:"",component:(()=>{class n{constructor(i,t){this.homeService=i,this._apiService=t,this.unsubscribe$=new w.B}ngOnInit(){this.fetchDevice()}fetchDevice(){var i=this;return(0,f.A)(function*(){const t=yield i._apiService.get("/api/mikrotik/get-info",!0);i.message=t})()}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete(),this.homeService.disconnect()}getFormattedMemory(i){const t=parseFloat(i)/1048576;return t>=1e3?(t/1024).toFixed(1)+" GiB":t.toFixed(1)+" MiB"}static{this.\u0275fac=function(t){return new(t||n)(e.rXU(y),e.rXU(C.G))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-home"]],decls:48,vars:10,consts:[["fuseCard",""],[1,"w-full","h-fit","pb-13"],[1,"dark","relative","flex-0","overflow-hidden","bg-[url('assets/img/home-bg.png')]","px-4","sm:p-16"],[1,"relative","z-10","flex","flex-col","items-center","py-20"],[1,"text-4xl","font-bold"],[1,"text-secondary","font-semibold","max-w-2xl","tracking-tight","sm:text-2xl"],[1,"grid-cols-1","md:grid-cols-2","lg:grid-cols-2","grid","px-4","py-4","gap-4"],[1,"flex","flex-col","px-8","py-6","pb-4"],[1,"flex","items-center","gap-5"],["svgIcon","heroicons_solid:calendar-days",2,"width","48px","height","48px"],[1,"mt-2"],[1,"font-medium"],["svgIcon","heroicons_solid:information-circle",2,"width","48px","height","48px"],["svgIcon","heroicons_solid:cpu-chip",2,"width","48px","height","48px"],[1,"flex","gap-2"]],template:function(t,s){1&t&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),e.EFF(4,"NetPro Connect"),e.k0s(),e.j41(5,"div",5),e.EFF(6," Empower Your Network Control in Your Hands "),e.k0s()()(),e.j41(7,"div",6)(8,"fuse-card",7,0)(10,"section",8),e.nrm(11,"mat-icon",9),e.j41(12,"div",10)(13,"p",11),e.EFF(14),e.k0s(),e.j41(15,"p",11),e.EFF(16),e.k0s(),e.j41(17,"p",11),e.EFF(18),e.k0s(),e.j41(19,"p",11),e.EFF(20),e.k0s()()()(),e.j41(21,"fuse-card",7,0)(23,"section",8),e.nrm(24,"mat-icon",12),e.j41(25,"div",10)(26,"p",11),e.EFF(27),e.k0s(),e.j41(28,"p",11),e.EFF(29),e.k0s(),e.j41(30,"p",11),e.EFF(31),e.k0s()()()(),e.j41(32,"fuse-card",7,0)(34,"section",8),e.nrm(35,"mat-icon",13),e.j41(36,"div",10)(37,"p",11),e.EFF(38),e.k0s(),e.j41(39,"p",11),e.EFF(40),e.k0s(),e.j41(41,"p",11),e.EFF(42),e.k0s(),e.j41(43,"div",14)(44,"p",11),e.EFF(45,"Voltage: 24.7V"),e.k0s(),e.j41(46,"p",11),e.EFF(47,"Temp: 31C"),e.k0s()()()()()()()),2&t&&(e.R7$(14),e.SpI("Date : ",null!=s.message&&s.message.date?s.message.date:"Memuat Data...",""),e.R7$(2),e.SpI("Time : ",null!=s.message&&s.message.time?s.message.time:"Memuat Data...",""),e.R7$(2),e.SpI("Uptime : ",null!=s.message&&s.message.upTime?s.message.upTime:"Memuat Data...",""),e.R7$(2),e.SpI("Time Zone : ",null!=s.message&&s.message.upTime?s.message.upTime:"Memuat Data...",""),e.R7$(7),e.SpI("Board Name : ",s.message.boardName?s.message.boardName:"Memuat data...",""),e.R7$(2),e.SpI("Model : ",null!=s.message&&s.message.model?s.message.model:"Memuat Data...",""),e.R7$(2),e.SpI("Router OS : ",null!=s.message&&s.message.rosVersion?s.message.rosVersion:"Memuat Data..."," "),e.R7$(7),e.SpI("CPU Load : ",null!=s.message&&s.message.cpuLoad?s.message.cpuLoad:"Memuat Data...","%"),e.R7$(2),e.SpI("Free Memory : ",s.getFormattedMemory(null!=s.message&&s.message.freeMemory?s.message.freeMemory:"Memuat Data..."),""),e.R7$(2),e.SpI("Free HDD : ",null!=s.message&&s.message.freeHdd?s.message.freeHdd+" kib":"Memuat Data..."," "))},dependencies:[m.$,a.m_,a.An,u.Hl,h.bv,v.MD,b.vg],encapsulation:2})}}return n})()}]}}]);