"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6995],{15083:(vt,Y,g)=>{g.d(Y,{EA:()=>it,E_:()=>K,F3:()=>X,Ii:()=>I});var v=g(10467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var W=function(a){return a.Unimplemented="UNIMPLEMENTED",a.Unavailable="UNAVAILABLE",a}(W||{});class M extends Error{constructor(n,i,d){super(n),this.message=n,this.code=i,this.data=d}}const x=a=>{var n,i,d,c,l;const P=a.CapacitorCustomPlatform||null,h=a.Capacitor||{},D=h.Plugins=h.Plugins||{},w=a.CapacitorPlatforms,G=(null===(n=w?.currentPlatform)||void 0===n?void 0:n.getPlatform)||(()=>null!==P?P.name:(a=>{var n,i;return a?.androidBridge?"android":null!==(i=null===(n=a?.webkit)||void 0===n?void 0:n.messageHandlers)&&void 0!==i&&i.bridge?"ios":"web"})(a)),ot=(null===(i=w?.currentPlatform)||void 0===i?void 0:i.isNativePlatform)||(()=>"web"!==G()),s=(null===(d=w?.currentPlatform)||void 0===d?void 0:d.isPluginAvailable)||(b=>{const f=O.get(b);return!(!f?.platforms.has(G())&&!o(b))}),o=(null===(c=w?.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(b=>{var f;return null===(f=h.PluginHeaders)||void 0===f?void 0:f.find(k=>k.name===b)}),O=new Map,R=(null===(l=w?.currentPlatform)||void 0===l?void 0:l.registerPlugin)||((b,f={})=>{const k=O.get(b);if(k)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),k.proxy;const E=G(),T=o(b);let B;const gt=function(){var y=(0,v.A)(function*(){return!B&&E in f?B=B="function"==typeof f[E]?yield f[E]():f[E]:null!==P&&!B&&"web"in f&&(B=B="function"==typeof f.web?yield f.web():f.web),B});return function(){return y.apply(this,arguments)}}(),H=y=>{let A;const F=(...C)=>{const U=gt().then(L=>{const _=((y,A)=>{var F,C;if(!T){if(y)return null===(C=y[A])||void 0===C?void 0:C.bind(y);throw new M(`"${b}" plugin is not implemented on ${E}`,W.Unimplemented)}{const U=T?.methods.find(L=>A===L.name);if(U)return"promise"===U.rtype?L=>h.nativePromise(b,A.toString(),L):(L,_)=>h.nativeCallback(b,A.toString(),L,_);if(y)return null===(F=y[A])||void 0===F?void 0:F.bind(y)}})(L,y);if(_){const lt=_(...C);return A=lt?.remove,lt}throw new M(`"${b}.${y}()" is not implemented on ${E}`,W.Unimplemented)});return"addListener"===y&&(U.remove=(0,v.A)(function*(){return A()})),U};return F.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:y,writable:!1,configurable:!1}),F},at=H("addListener"),q=H("removeListener"),rt=(y,A)=>{const F=at({eventName:y},A),C=function(){var L=(0,v.A)(function*(){const _=yield F;q({eventName:y,callbackId:_},A)});return function(){return L.apply(this,arguments)}}(),U=new Promise(L=>F.then(()=>L({remove:C})));return U.remove=(0,v.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield C()}),U},tt=new Proxy({},{get(y,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?rt:at;case"removeListener":return q;default:return H(A)}}});return D[b]=tt,O.set(b,{name:b,proxy:tt,platforms:new Set([...Object.keys(f),...T?[E]:[]])}),tt});return h.convertFileSrc||(h.convertFileSrc=b=>b),h.getPlatform=G,h.handleError=b=>a.console.error(b),h.isNativePlatform=ot,h.isPluginAvailable=s,h.pluginMethodNoop=(b,f,k)=>Promise.reject(`${k} does not have an implementation of "${f}".`),h.registerPlugin=R,h.Exception=M,h.DEBUG=!!h.DEBUG,h.isLoggingEnabled=!!h.isLoggingEnabled,h.platform=h.getPlatform(),h.isNative=h.isNativePlatform(),h},I=(a=>a.Capacitor=x(a))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),X=I.registerPlugin;class K{constructor(n){this.listeners={},this.retainedEventArguments={},this.windowListeners={},n&&(console.warn(`Capacitor WebPlugin "${n.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=n)}addListener(n,i){var d=this;let c=!1;this.listeners[n]||(this.listeners[n]=[],c=!0),this.listeners[n].push(i);const P=this.windowListeners[n];P&&!P.registered&&this.addWindowListener(P),c&&this.sendRetainedArgumentsForEvent(n);const h=function(){var w=(0,v.A)(function*(){return d.removeListener(n,i)});return function(){return w.apply(this,arguments)}}();return Promise.resolve({remove:h})}removeAllListeners(){var n=this;return(0,v.A)(function*(){n.listeners={};for(const i in n.windowListeners)n.removeWindowListener(n.windowListeners[i]);n.windowListeners={}})()}notifyListeners(n,i,d){const c=this.listeners[n];if(c)c.forEach(l=>l(i));else if(d){let l=this.retainedEventArguments[n];l||(l=[]),l.push(i),this.retainedEventArguments[n]=l}}hasListeners(n){return!!this.listeners[n].length}registerWindowListener(n,i){this.windowListeners[i]={registered:!1,windowEventName:n,pluginEventName:i,handler:d=>{this.notifyListeners(i,d)}}}unimplemented(n="not implemented"){return new I.Exception(n,W.Unimplemented)}unavailable(n="not available"){return new I.Exception(n,W.Unavailable)}removeListener(n,i){var d=this;return(0,v.A)(function*(){const c=d.listeners[n];if(!c)return;const l=c.indexOf(i);d.listeners[n].splice(l,1),d.listeners[n].length||d.removeWindowListener(d.windowListeners[n])})()}addWindowListener(n){window.addEventListener(n.windowEventName,n.handler),n.registered=!0}removeWindowListener(n){n&&(window.removeEventListener(n.windowEventName,n.handler),n.registered=!1)}sendRetainedArgumentsForEvent(n){const i=this.retainedEventArguments[n];i&&(delete this.retainedEventArguments[n],i.forEach(d=>{this.notifyListeners(n,d)}))}}const nt=a=>encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),N=a=>a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class st extends K{getCookies(){return(0,v.A)(function*(){const n=document.cookie,i={};return n.split(";").forEach(d=>{if(d.length<=0)return;let[c,l]=d.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");c=N(c).trim(),l=N(l).trim(),i[c]=l}),i})()}setCookie(n){return(0,v.A)(function*(){try{const i=nt(n.key),d=nt(n.value),c=`; expires=${(n.expires||"").replace("expires=","")}`,l=(n.path||"/").replace("path=",""),P=null!=n.url&&n.url.length>0?`domain=${n.url}`:"";document.cookie=`${i}=${d||""}${c}; path=${l}; ${P};`}catch(i){return Promise.reject(i)}})()}deleteCookie(n){return(0,v.A)(function*(){try{document.cookie=`${n.key}=; Max-Age=0`}catch(i){return Promise.reject(i)}})()}clearCookies(){return(0,v.A)(function*(){try{const n=document.cookie.split(";")||[];for(const i of n)document.cookie=i.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(n){return Promise.reject(n)}})()}clearAllCookies(){var n=this;return(0,v.A)(function*(){try{yield n.clearCookies()}catch(i){return Promise.reject(i)}})()}}X("CapacitorCookies",{web:()=>new st});const pt=function(){var a=(0,v.A)(function*(n){return new Promise((i,d)=>{const c=new FileReader;c.onload=()=>{const l=c.result;i(l.indexOf(",")>=0?l.split(",")[1]:l)},c.onerror=l=>d(l),c.readAsDataURL(n)})});return function(i){return a.apply(this,arguments)}}(),it=(a,n={})=>{const i=Object.assign({method:a.method||"GET",headers:a.headers},n),c=((a={})=>{const n=Object.keys(a);return Object.keys(a).map(c=>c.toLocaleLowerCase()).reduce((c,l,P)=>(c[l]=a[n[P]],c),{})})(a.headers)["content-type"]||"";if("string"==typeof a.data)i.body=a.data;else if(c.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[P,h]of Object.entries(a.data||{}))l.set(P,h);i.body=l.toString()}else if(c.includes("multipart/form-data")||a.data instanceof FormData){const l=new FormData;if(a.data instanceof FormData)a.data.forEach((h,D)=>{l.append(D,h)});else for(const h of Object.keys(a.data))l.append(h,a.data[h]);i.body=l;const P=new Headers(i.headers);P.delete("content-type"),i.headers=P}else(c.includes("application/json")||"object"==typeof a.data)&&(i.body=JSON.stringify(a.data));return i};class ft extends K{request(n){return(0,v.A)(function*(){const i=it(n,n.webFetchExtra),d=((a,n=!0)=>a?Object.entries(a).reduce((d,c)=>{const[l,P]=c;let h,D;return Array.isArray(P)?(D="",P.forEach(w=>{h=n?encodeURIComponent(w):w,D+=`${l}=${h}&`}),D.slice(0,-1)):(h=n?encodeURIComponent(P):P,D=`${l}=${h}`),`${d}&${D}`},"").substr(1):null)(n.params,n.shouldEncodeUrlParams),c=d?`${n.url}?${d}`:n.url,l=yield fetch(c,i),P=l.headers.get("content-type")||"";let D,w,{responseType:h="text"}=l.ok?n:{};switch(P.includes("application/json")&&(h="json"),h){case"arraybuffer":case"blob":w=yield l.blob(),D=yield pt(w);break;case"json":D=yield l.json();break;default:D=yield l.text()}const z={};return l.headers.forEach((G,m)=>{z[m]=G}),{data:D,headers:z,status:l.status,url:l.url}})()}get(n){var i=this;return(0,v.A)(function*(){return i.request(Object.assign(Object.assign({},n),{method:"GET"}))})()}post(n){var i=this;return(0,v.A)(function*(){return i.request(Object.assign(Object.assign({},n),{method:"POST"}))})()}put(n){var i=this;return(0,v.A)(function*(){return i.request(Object.assign(Object.assign({},n),{method:"PUT"}))})()}patch(n){var i=this;return(0,v.A)(function*(){return i.request(Object.assign(Object.assign({},n),{method:"PATCH"}))})()}delete(n){var i=this;return(0,v.A)(function*(){return i.request(Object.assign(Object.assign({},n),{method:"DELETE"}))})()}}X("CapacitorHttp",{web:()=>new ft})},11889:(vt,Y,g)=>{g.d(Y,{Wi:()=>Z,__:()=>v});var v=function(S){return S.Documents="DOCUMENTS",S.Data="DATA",S.Library="LIBRARY",S.Cache="CACHE",S.External="EXTERNAL",S.ExternalStorage="EXTERNAL_STORAGE",S}(v||{}),Z=function(S){return S.UTF8="utf8",S.ASCII="ascii",S.UTF16="utf16",S}(Z||{})},16995:(vt,Y,g)=>{g.r(Y),g.d(Y,{default:()=>G});var v=g(10467),Z=g(31849),t=g(54438),V=g(25007);const S=["chart"];let yt=(()=>{class m{constructor(){this.ngZone=(0,t.WQX)(t.SKi),this.autoUpdateSeries=!0,this.hasPendingLoad=!1}ngOnChanges(e){V.$.schedule(()=>{this.autoUpdateSeries&&0===Object.keys(e).filter(s=>"series"!==s).length?this.updateSeries(this.series,!0):this.createElement()})}ngOnDestroy(){this.destroy()}createElement(){var e=this;typeof window>"u"||this.hasPendingLoad||(this.hasPendingLoad=!0,this.ngZone.runOutsideAngular((0,v.A)(function*(){e.destroy();const s=(yield Promise.resolve().then(g.t.bind(g,84550,19))).default,r=e.buildOptions();e.chartObj=new s(e.chartElement.nativeElement,r),window.ApexCharts=s,yield e.render(),e.hasPendingLoad=!1})))}render(){return this.ngZone.runOutsideAngular(()=>this.chartObj?.render())}updateOptions(e,s,r,o){return this.ngZone.runOutsideAngular(()=>this.chartObj?.updateOptions(e,s,r,o))}updateSeries(e,s){return this.ngZone.runOutsideAngular(()=>this.chartObj?.updateSeries(e,s))}appendSeries(e,s){this.ngZone.runOutsideAngular(()=>this.chartObj?.appendSeries(e,s))}appendData(e){this.ngZone.runOutsideAngular(()=>this.chartObj?.appendData(e))}toggleSeries(e){return this.ngZone.runOutsideAngular(()=>this.chartObj?.toggleSeries(e))}showSeries(e){this.ngZone.runOutsideAngular(()=>this.chartObj?.showSeries(e))}hideSeries(e){this.ngZone.runOutsideAngular(()=>this.chartObj?.hideSeries(e))}resetSeries(){this.ngZone.runOutsideAngular(()=>this.chartObj?.resetSeries())}zoomX(e,s){this.ngZone.runOutsideAngular(()=>this.chartObj?.zoomX(e,s))}toggleDataPointSelection(e,s){this.ngZone.runOutsideAngular(()=>this.chartObj?.toggleDataPointSelection(e,s))}destroy(){this.chartObj?.destroy()}setLocale(e){this.ngZone.runOutsideAngular(()=>this.chartObj?.setLocale(e))}paper(){this.ngZone.runOutsideAngular(()=>this.chartObj?.paper())}addXaxisAnnotation(e,s,r){this.ngZone.runOutsideAngular(()=>this.chartObj?.addXaxisAnnotation(e,s,r))}addYaxisAnnotation(e,s,r){this.ngZone.runOutsideAngular(()=>this.chartObj?.addYaxisAnnotation(e,s,r))}addPointAnnotation(e,s,r){this.ngZone.runOutsideAngular(()=>this.chartObj?.addPointAnnotation(e,s,r))}removeAnnotation(e,s){this.ngZone.runOutsideAngular(()=>this.chartObj?.removeAnnotation(e,s))}clearAnnotations(e){this.ngZone.runOutsideAngular(()=>this.chartObj?.clearAnnotations(e))}dataURI(e){return this.chartObj?.dataURI(e)}buildOptions(){const e={};return this.annotations&&(e.annotations=this.annotations),this.chart&&(e.chart=this.chart),this.colors&&(e.colors=this.colors),this.dataLabels&&(e.dataLabels=this.dataLabels),this.series&&(e.series=this.series),this.stroke&&(e.stroke=this.stroke),this.labels&&(e.labels=this.labels),this.legend&&(e.legend=this.legend),this.fill&&(e.fill=this.fill),this.tooltip&&(e.tooltip=this.tooltip),this.plotOptions&&(e.plotOptions=this.plotOptions),this.responsive&&(e.responsive=this.responsive),this.markers&&(e.markers=this.markers),this.noData&&(e.noData=this.noData),this.xaxis&&(e.xaxis=this.xaxis),this.yaxis&&(e.yaxis=this.yaxis),this.forecastDataPoints&&(e.forecastDataPoints=this.forecastDataPoints),this.grid&&(e.grid=this.grid),this.states&&(e.states=this.states),this.title&&(e.title=this.title),this.subtitle&&(e.subtitle=this.subtitle),this.theme&&(e.theme=this.theme),e}static{this.\u0275fac=function(s){return new(s||m)}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["apx-chart"]],viewQuery:function(s,r){if(1&s&&t.GBs(S,7),2&s){let o;t.mGM(o=t.lsd())&&(r.chartElement=o.first)}},inputs:{chart:"chart",annotations:"annotations",colors:"colors",dataLabels:"dataLabels",series:"series",stroke:"stroke",labels:"labels",legend:"legend",markers:"markers",noData:"noData",fill:"fill",tooltip:"tooltip",plotOptions:"plotOptions",responsive:"responsive",xaxis:"xaxis",yaxis:"yaxis",forecastDataPoints:"forecastDataPoints",grid:"grid",states:"states",title:"title",subtitle:"subtitle",theme:"theme",autoUpdateSeries:"autoUpdateSeries"},features:[t.OA$],decls:2,vars:0,consts:[["chart",""]],template:function(s,r){1&s&&t.nrm(0,"div",null,0)},encapsulation:2,changeDetection:0})}}return m})(),W=(()=>{class m{static{this.\u0275fac=function(s){return new(s||m)}}static{this.\u0275mod=t.$C({type:m})}static{this.\u0275inj=t.G2t({})}}return m})();var M=g(30636),$=g(25084),x=g(89417),et=g(3),I=g(60177),X=g(99213),dt=g(82798),ct=g(40711),K=g(10500),ut=g(3366);function nt(m,ot){if(1&m&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&m){const e=ot.$implicit;t.Y8G("value",e.profile_name),t.R7$(),t.JRh(e.profile_name)}}const N=new Date,st=N.getMonth(),ht=N.getFullYear(),pt=N.getDay();let J=(()=>{class m{constructor(e,s,r,o,u){this.bandwithService=e,this.cdr=s,this.roleService=r,this.fb=o,this._apiService=u,this.range=new x.gE({start:new x.MJ(new Date(ht,st-1)),end:new x.MJ(new Date)}),this.group=new x.gE({userGroup:new x.MJ("user_bytes_log")}),this.totalBytesInAll=0,this.totalBytesOutAll=0,this.totalBytesAll=0,this.totalBandwidthMax=5e9,this.roleDatas=[],this.chartType="line",this.chartOptions2={series:[{name:"",data:[]},{name:"",data:[]},{name:"",data:[]}],chart:{type:"area",stacked:!0,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},plotOptions:{bar:{horizontal:!1}},xaxis:{categories:[]},yaxis:{title:{text:"Total Bandwidth Usage (MB)"}},fill:{type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},tooltip:{y:{formatter:function(p){return p+" MB/s"}}},dataLabels:{enabled:!0,formatter:function(p,{}){return p+" MB/s"}}},this.range.get("start")?.valueChanges.subscribe(p=>{const O=this.range.get("end")?.value,j=this.group.get("userGroup")?.value;p&&O&&this.fetchData(p.toLocaleDateString("en-CA"),O.toLocaleDateString("en-CA"),j)}),this.range.get("end")?.valueChanges.subscribe(p=>{const O=this.range.get("start")?.value,j=this.group.get("userGroup")?.value;O&&p&&this.fetchData(O.toLocaleDateString("en-CA"),p.toLocaleDateString("en-CA"),j)}),this.group.get("userGroup")?.valueChanges.subscribe(p=>{const O=this.range.get("start")?.value,j=this.range.get("end")?.value;this.fetchData(O.toLocaleDateString("en-CA"),j.toLocaleDateString("en-CA"),p)})}fetchData(e,s,r){var o=this;return(0,v.A)(function*(){o.currentStartDate=e,o.currentEndDate=s,o.currentUserProfile=r;const u=yield o._apiService.post("/api/mikrotik/get-data-by-date-role",{role:r,startDate:e,endDate:s});console.log("DATA TABLEE",u),o.totalUserProfile=u.role,1===u.details.length?(o.chartOptions2.chart={type:"bar",height:350},o.chartOptions2.fill={opacity:1}):(o.chartOptions2.fill={type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},o.chartOptions2.chart={type:"area",stacked:!0,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}});const p=u.details.map(f=>f.date),O=u.details.map(f=>o.convertBytesToMB(f.total_bytes_in).toFixed(1)),j=u.details.map(f=>o.convertBytesToMB(f.total_bytes_out).toFixed(1)),R=u.details.map(f=>o.convertBytesToMB(f.total_bytes).toFixed(1));o.totalBytesInAll=o.convertBytesToMB(u.total_bytes_in).toFixed(2),o.totalBytesOutAll=o.convertBytesToMB(u.total_bytes_out).toFixed(2),o.totalBytesAll=o.convertBytesToMB(u.total_bytes).toFixed(2);const b=new Set;u.details.forEach(f=>{f.all_users.forEach(k=>{b.add(k.user_name)})}),o.totalUser=b.size,o.chartOptions2.xaxis={categories:p},o.chartOptions2.series=[{name:"Total Download",data:O},{name:"Total Upload",data:j},{name:"Total Bandwidth",data:R}],o.cdr.detectChanges()})()}pollingFetchData(e,s,r){var o=this;return(0,v.A)(function*(){o.currentStartDate=e,o.currentEndDate=s,o.currentUserProfile=r;const u=yield o._apiService.postWithoutLoadingBar("/api/mikrotik/get-data-by-date-role",{role:r,startDate:e,endDate:s});o.totalUserProfile=u.role,1===u.details.length?(o.chartOptions2.chart={type:"bar",height:350},o.chartOptions2.fill={opacity:1}):(o.chartOptions2.fill={type:"gradient",gradient:{shadeIntensity:1,inverseColors:!1,opacityFrom:.5,opacityTo:0,stops:[0,90,100]}},o.chartOptions2.chart={type:"area",stacked:!0,height:350,zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}});const p=u.details.map(f=>f.date),O=u.details.map(f=>o.convertBytesToMB(f.total_bytes_in).toFixed(1)),j=u.details.map(f=>o.convertBytesToMB(f.total_bytes_out).toFixed(1)),R=u.details.map(f=>o.convertBytesToMB(f.total_bytes).toFixed(1));o.totalBytesInAll=o.convertBytesToMB(u.total_bytes_in).toFixed(2),o.totalBytesOutAll=o.convertBytesToMB(u.total_bytes_out).toFixed(2),o.totalBytesAll=o.convertBytesToMB(u.total_bytes).toFixed(2);const b=new Set;u.details.forEach(f=>{f.all_users.forEach(k=>{b.add(k.user_name)})}),o.totalUser=b.size,o.chartOptions2.xaxis={categories:p},o.chartOptions2.series=[{name:"Total Download",data:O},{name:"Total Upload",data:j},{name:"Total Bandwidth",data:R}],o.cdr.detectChanges()})()}convertBytesToMB(e){return parseFloat(e)/1048576}getRole(){var e=this;return(0,v.A)(function*(){try{const s=yield e._apiService.get("/api/mikrotik/get-profile",!0);e.roleDatas=s.profiles}catch(s){throw s}})()}ngAfterViewInit(){const e=new Date(ht,st-1,pt).toLocaleDateString("en-CA"),s=(new Date).toLocaleDateString("en-CA");console.log(e,s),this.getRole(),this.fetchData(e,s,"All"),this.cdr.detectChanges()}static{this.\u0275fac=function(s){return new(s||m)(t.rXU(ct.P),t.rXU(t.gRc),t.rXU(K.W),t.rXU(x.ok),t.rXU(ut.G))}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-area-chart"]],decls:65,vars:19,consts:[["fuseCard",""],["picker",""],[1,"flex","flex-col","px-8","py-6","pb-4"],[1,"text-xl","font-bold"],[1,"my-5","bg-neutral-100","p-6","rounded-lg"],[3,"rangePicker","formGroup"],["matStartDate","","formControlName","start","placeholder","Start date"],["matEndDate","","formControlName","end","placeholder","End date"],["matSuffix","",3,"for"],[1,"grid-cols-1","md:grid-cols-3","grid","gap-6","mb-5"],[1,"flex","flex-auto","flex-col","overflow-hidden","rounded-2xl","p-6","shadow-xl","border-[1px]","bg-blue-500","text-white"],[1,"flex","items-start","justify-between"],[1,"truncate","text-lg","font-semibold","leading-6","tracking-tight"],[1,"mt-2","flex","flex-col","items-center"],[1,"text-7xl","font-bold","leading-none","tracking-tight","sm:text-8xl"],[1,"text-lg","font-medium"],[1,"flex","flex-auto","flex-col","overflow-hidden","rounded-2xl","p-6","shadow-xl","border-[1px]","bg-green-500","text-white"],[1,"text-7xl","font-bold","leading-none","tracking-tight","text-white","sm:text-8xl"],[1,"flex","flex-auto","flex-col","overflow-hidden","rounded-2xl","p-6","shadow-xl","border-[1px]","bg-yellow-500","text-white"],[1,"flex","flex-col","px-8","py-6","pb-4","shadow-md","md:col-span-2","bg-slate-800"],[1,"text-xl","font-bold","text-white"],[1,"mt-2"],[1,"font-medium","text-white"],[1,"flex","flex-col","px-8","py-6","pb-4","shadow-md","bg-slate-800"],[1,"w-full","px-4"],[3,"formControl"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"series","chart","xaxis","yaxis","dataLabels","fill","plotOptions","tooltip"]],template:function(s,r){if(1&s&&(t.j41(0,"fuse-card",2,0)(2,"div",3),t.EFF(3,"Network Status Traffic"),t.k0s(),t.j41(4,"mat-form-field",4)(5,"mat-label"),t.EFF(6,"Enter a date range"),t.k0s(),t.j41(7,"mat-date-range-input",5),t.nrm(8,"input",6)(9,"input",7),t.k0s(),t.j41(10,"mat-hint"),t.EFF(11,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.k0s(),t.nrm(12,"mat-datepicker-toggle",8)(13,"mat-date-range-picker",null,1),t.k0s(),t.j41(15,"div",9)(16,"div",10)(17,"div",11)(18,"div",12),t.EFF(19," Download "),t.k0s()(),t.j41(20,"div",13)(21,"div",14),t.EFF(22),t.k0s(),t.j41(23,"div",15),t.EFF(24," Mb/s "),t.k0s()()(),t.j41(25,"div",16)(26,"div",11)(27,"div",12),t.EFF(28," Upload "),t.k0s()(),t.j41(29,"div",13)(30,"div",17),t.EFF(31),t.k0s(),t.j41(32,"div",15),t.EFF(33," Mb/s "),t.k0s()()(),t.j41(34,"div",18)(35,"div",11)(36,"div",12),t.EFF(37," Total Bandwidth "),t.k0s()(),t.j41(38,"div",13)(39,"div",17),t.EFF(40),t.k0s(),t.j41(41,"div",15),t.EFF(42," Mb/s "),t.k0s()()(),t.j41(43,"fuse-card",19,0)(45,"div",20),t.EFF(46,"Total User Login"),t.k0s(),t.j41(47,"div",21)(48,"p",22),t.EFF(49),t.k0s()()(),t.j41(50,"fuse-card",23,0)(52,"div",20),t.EFF(53,"Total User Profile"),t.k0s(),t.j41(54,"div",21)(55,"p",22),t.EFF(56),t.k0s()()()(),t.j41(57,"mat-form-field",24)(58,"mat-label"),t.EFF(59,"Select Profile"),t.k0s(),t.j41(60,"mat-select",25)(61,"mat-option",26),t.EFF(62,"All"),t.k0s(),t.DNE(63,nt,2,2,"mat-option",27),t.k0s()(),t.nrm(64,"apx-chart",28),t.k0s()),2&s){const o=t.sdS(14);t.R7$(7),t.Y8G("rangePicker",o)("formGroup",r.range),t.R7$(5),t.Y8G("for",o),t.R7$(10),t.SpI(" ",r.totalBytesInAll," "),t.R7$(9),t.SpI(" ",r.totalBytesOutAll," "),t.R7$(9),t.SpI(" ",r.totalBytesAll," "),t.R7$(9),t.SpI("",r.totalUser," User"),t.R7$(7),t.SpI("User Profile : ",r.totalUserProfile,""),t.R7$(4),t.Y8G("formControl",r.group.get("userGroup")),t.R7$(),t.Y8G("value","All"),t.R7$(2),t.Y8G("ngForOf",r.roleDatas),t.R7$(),t.Y8G("series",r.chartOptions2.series)("chart",r.chartOptions2.chart)("xaxis",r.chartOptions2.xaxis)("yaxis",r.chartOptions2.yaxis)("dataLabels",r.chartOptions2.dataLabels)("fill",r.chartOptions2.fill)("plotOptions",r.chartOptions2.plotOptions)("tooltip",r.chartOptions2.tooltip)}},dependencies:[Z.$,W,yt,M.RG,M.rl,M.nJ,M.MV,M.yw,$.X6,$.bU,$.el,$.xR,$.IG,$.SG,x.YN,x.me,x.BC,x.cb,x.X1,x.l_,x.j4,x.JD,et.WX,I.MD,I.Sq,X.m_,et.Sy,et.wT,dt.Ve,dt.VO],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"],changeDetection:0})}}return m})();var Q=g(88834),it=g(14160),ft=g(89107),xt=g(34941),a=g.n(xt),n=g(15083),i=g(11889);const d=(0,n.F3)("Filesystem",{web:()=>g.e(2937).then(g.bind(g,32937)).then(m=>new m.FilesystemWeb)});var c=g(45794);const l=(0,n.F3)("FileOpener");var P=g(96697),h=g(80507),D=g(70600);let w=(()=>{class m{constructor(e,s,r,o,u){this.fuseLoadingService=e,this.fb=s,this.bandwithService=r,this.platform=o,this._apiService=u,this.toast=(0,t.WQX)(c.tw)}ngOnInit(){this.dateForm=this.fb.group({start:["",x.k0.required],end:["",x.k0.required]})}checkPermission(){return(0,v.A)(function*(){return"granted"===(yield d.requestPermissions()).publicStorage||(alert("Permission denied. Please allow access to continue."),!1)})()}generatePdf(){var e=this;return(0,v.A)(function*(){e.dateForm.valid?(yield e.checkPermission())?e.generateTable():alert("Permission is required to generate PDF."):alert("Form Not Valid")})()}savePdfToDevice(e,s){var r=this;return(0,v.A)(function*(){try{const u=e.output("datauristring").split(",")[1],p=yield d.writeFile({path:s,data:u,directory:i.__.Documents,recursive:!0});r.toast.success(`PDF Successfully Downloaded ${p.uri}`,"Success Download",{tapToDismiss:!0}).onTap.pipe((0,P.s)(1)).subscribe((0,v.A)(function*(){try{if(r.platform.is("android")||r.platform.is("ios")){const O={filePath:p.uri,contentType:"application/pdf",openWithDefault:!0};return void(yield l.open(O))}}catch(O){console.error("Error opening file:",O)}}))}catch(o){console.error("Error saving file:",o)}})()}generateTable(){var e=this;return(0,v.A)(function*(){const s=new ft.default,r=s.internal.pageSize.getWidth(),o=s.internal.pageSize.getHeight(),u=10;let p=u;s.setFont("Inter"),s.addImage("../../../../../../assets/img/netpro-logo.png","PNG",u,p,50,20),s.setFontSize(8),s.text("adhivasindo.co.id   022-7508499   admin@adhivasindo.co.id",125,p+5),s.text("Jln. Edelweiss CRC 011 Ruko Crystal Summarecon ",135,p+10),s.text("Kec.Gedebage  Kota Bandung  ",160,p+15),p+=25,s.setLineWidth(.5),s.line(u,p,r-u,p),p+=10,s.setFontSize(16),s.setFont("Inter","bold"),s.text("Laporan Penggunaan Mikrotik",r/2,p,{align:"center"}),p+=10,s.setFontSize(10),s.setFont("Inter","normal");const R=new Date,b=new Date(e.dateForm.value.start).toLocaleDateString("en-CA"),f=new Date(e.dateForm.value.end).toLocaleDateString("en-CA"),k={day:"2-digit",month:"long",year:"numeric"},E=new Date(e.dateForm.value.start).toLocaleDateString("id-ID",k),T=new Date(e.dateForm.value.end).toLocaleDateString("id-ID",k),gt=R.toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"}),mt=R.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"});s.text(`Periode Laporan: ${E} - ${T}`,52,p,{align:"center"}),p+=5,s.text(`Periode Pengambilan data : ${gt} / ${mt}`,53.3,p,{align:"center"}),p+=15;const H=(y,A,F,C={})=>{p+30>o-u&&(s.addPage(),p=u),s.setFontSize(12),s.setFont("Inter","bold"),s.text(y,u,p),p+=5,a()(s,{head:A,body:F,startY:p,margin:{left:u,right:u},styles:{lineWidth:.5,lineColor:[0,0,0],cellPadding:2,...C},headStyles:{fillColor:[200,200,200],textColor:[0,0,0],lineWidth:.5,lineColor:[0,0,0]},didDrawPage:U=>{p=U.cursor.y+15}})},at=yield e._apiService.post("/api/mikrotik/get-data-by-date",{startDate:`${b}`,endDate:`${f}`}),q=[],rt=[];at.details.forEach(y=>{const A=y.date,F=y.largest_user;rt.push([A,F.user_name,F.role,F.percentage,`${e.convertBytesToMB(y.total_bytes).toFixed(1)} MB/s`]),y.all_users.forEach(C=>{"unknown"!==C.role&&q.push([A,C.user_name,C.role,`${e.convertBytesToMB(C.total_bytes_in).toFixed(1)} MB/s`,`${e.convertBytesToMB(C.total_bytes_out).toFixed(1)} MB/s`,`${e.convertBytesToMB(C.total_user_bytes).toFixed(1)} MB/s`])})}),H("A. User login",[["Tanggal","Nama Pengguna","User Profile","Total Download","Total Upload","Total Bandwidth"]],q),H("B. Penggunaan Bandwith Terbesar",[["Tanggal","Nama Pengguna ","User Profile","Percentage","Total Bandwidth"]],rt);const tt=s.internal.pages.length;for(let y=1;y<=tt;y++)s.setPage(y),s.addImage("../../../../../assets/img/footer-pdf.png","PNG",0,o-30,r,30);"web"===n.Ii.getPlatform()?s.save(`laporan_penggunaan_mikrotik_${E}_${T}.pdf`):yield e.savePdfToDevice(s,`laporan_penggunaan_mikrotik_${E}_${T}.pdf`)})()}convertBytesToMB(e){return parseFloat(e)/1048576}calculatePercentage(e){return e/1e9*100}static{this.\u0275fac=function(s){return new(s||m)(t.rXU(h.X),t.rXU(x.ok),t.rXU(ct.P),t.rXU(D.OD),t.rXU(ut.G))}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-pdf"]],decls:20,vars:1,consts:[["fuseCard",""],[1,"flex","flex-col","shadow-md"],[1,"px-8","py-6"],[1,"text-xl","font-bold"],[1,"text-sm","font-medium","opacity-50"],[1,"mt-4",3,"formGroup"],[1,"flex","flex-col","sm:flex-row","items-center","gap-4","justify-between","w-full","bg-neutral-100","p-5","rounded-md"],[1,"w-full"],[1,"block","text-base","font-medium","text-gray-700","dark:text-white"],["type","date","formControlName","start","placeholder","Input Date",1,"border-2","p-2","mt-2","bg-white","w-full","rounded-md"],["type","date","formControlName","end","placeholder","Input Date",1,"border-2","p-2","mt-2","bg-white","w-full","rounded-md"],[1,"bg-slate-800","p-3","px-5","flex","justify-end"],["mat-button","",1,"bg-red-600","text-white",3,"click"]],template:function(s,r){if(1&s){const o=t.RV6();t.j41(0,"fuse-card",1,0)(2,"div",2)(3,"div",3),t.EFF(4," Generate Report Time to PDF "),t.j41(5,"p",4),t.EFF(6,"Generate your daily report "),t.k0s()(),t.j41(7,"form",5)(8,"div",6)(9,"div",7)(10,"label",8),t.EFF(11,"Select Start Date :"),t.k0s(),t.nrm(12,"input",9),t.k0s(),t.j41(13,"div",7)(14,"label",8),t.EFF(15,"Select End Date :"),t.k0s(),t.nrm(16,"input",10),t.k0s()()()(),t.j41(17,"div",11)(18,"button",12),t.bIt("click",function(){return t.eBV(o),t.Njj(r.generatePdf())}),t.EFF(19,"Generate PDF"),t.k0s()()()}2&s&&(t.R7$(7),t.Y8G("formGroup",r.dateForm))},dependencies:[Z.$,$.X6,Q.Hl,Q.$z,x.YN,x.qT,x.me,x.BC,x.cb,x.X1,x.j4,x.JD],encapsulation:2})}}return m})();const G=[{path:"",component:(()=>{class m{constructor(){this.chart=J}static{this.\u0275fac=function(s){return new(s||m)}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["app-bandwith"]],viewQuery:function(s,r){if(1&s&&t.GBs(J,5),2&s){let o;t.mGM(o=t.lsd())&&(r.areaChart=o.first)}},decls:10,vars:0,consts:[[1,"w-full","h-full","mb-auto","pb-4","overflow-y-scroll"],[1,"dark","relative","flex-0","overflow-hidden","bg-gray-800","px-4","py-8","h-[300px]","sm:p-16"],["viewBox","0 0 960 540","width","100%","height","100%","preserveAspectRatio","xMidYMax slice","xmlns","http://www.w3.org/2000/svg",1,"absolute","inset-0","pointer-events-none"],["fill","none","stroke","currentColor","stroke-width","100",1,"text-gray-700","opacity-25"],["r","234","cx","196","cy","23"],["r","234","cx","790","cy","491"],[1,"relative","-translate-y-15"],[1,"px-5","grid","gap-5"]],template:function(s,r){1&s&&(t.j41(0,"div",0)(1,"div",1),t.qSk(),t.j41(2,"svg",2)(3,"g",3),t.nrm(4,"circle",4)(5,"circle",5),t.k0s()()(),t.joV(),t.j41(6,"section",6)(7,"div",7),t.nrm(8,"app-area-chart")(9,"app-pdf"),t.k0s()()())},dependencies:[Q.Hl,X.m_,it.J,w,J],encapsulation:2})}}return m})()}]}}]);