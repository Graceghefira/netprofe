"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5063],{25063:(D,h,o)=>{o.r(h),o.d(h,{default:()=>E});var p=o(10467),f=o(60177),n=o(89417),v=o(82765),m=o(30636),k=o(99213),g=o(59042),u=o(49192),e=o(54438),w=o(42641),F=o(95416);const b=()=>["/dashboards/dhcp"];function y(s,c){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Address is required "),e.k0s())}function N(s,c){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Gateaway is required "),e.k0s())}function S(s,c){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Dns Server is required "),e.k0s())}function C(s,c){1&s&&(e.j41(0,"span"),e.EFF(1,"Create DHCP Server"),e.k0s())}function x(s,c){1&s&&(e.j41(0,"span"),e.EFF(1,"Creating..."),e.k0s())}const E=[{path:"",component:(()=>{class s{constructor(t,i,r,a,l){this.fb=t,this.dhcpService=i,this.router=r,this.snackBar=a,this.route=l,this.isSubmitting=!1,this.availableInterfaces$=this.dhcpService.availableInterfaces$,this.loading$=this.dhcpService.loading$,this.error$=this.dhcpService.error$,this.networks$=this.dhcpService.networksId$}ngOnInit(){this.initializeForm(),this.route.paramMap.subscribe(t=>{this.gateway=t.get("gateway"),this.fetchDataByGateway()})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}fetchDataByGateway(){var t=this;this.subscription=this.networks$.subscribe(function(){var i=(0,p.A)(function*(r){if(r&&(0===r.length||String(r.gateway)!==String(t.gateway))){const a=yield t.dhcpService.getNetworkByGateway(t.gateway);t.networks=a.networks[0],t.patchFormWithData(t.networks)}});return function(r){return i.apply(this,arguments)}}())}patchFormWithData(t){this.dhcpNetworkForm.patchValue({address:t.address,gateway:t.gateway,dns_server:t["dns-server"]})}initializeForm(){this.dhcpNetworkForm=this.fb.group({address:[null,n.k0.required],gateway:[null,n.k0.required],dns_server:[null,n.k0.required]})}onSubmit(){var t=this;return(0,p.A)(function*(){if(t.dhcpNetworkForm.valid&&!t.isSubmitting){t.isSubmitting=!0;const i={address:t.dhcpNetworkForm.value.address,gateway:t.dhcpNetworkForm.value.gateway,dns_server:t.dhcpNetworkForm.value.dns_server};console.log(i);try{const r=yield t.dhcpService.postNetwork(i);console.log(r),"success"===r.status&&t.snackBar.open("Network added successfully!"===r.message?"DHCP Networks created successfully":"DHCP Network already exists and will be automatically updated.","Close",{duration:3e3})}catch(r){console.error("Error creating DHCP Server:",r),t.snackBar.open("Error creating DHCP Server","Close",{duration:3e3})}finally{t.isSubmitting=!1}}})()}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(n.ok),e.rXU(w.S),e.rXU(u.Ix),e.rXU(F.UG),e.rXU(u.nX))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-form-edit"]],decls:32,vars:9,consts:[[1,"h-full","w-full","pb-15"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"rtl:rotate-180","block","w-3","h-3","mx-1","text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[1,"ms-1","text-sm","font-medium","text-gray-700","hover:text-blue-600","md:ms-2","dark:text-gray-400","dark:hover:text-white"],[1,"p-3"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4","shadow",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full","mb-2"],["matInput","","formControlName","address","placeholder","172.16.1.0/24"],[4,"ngIf"],["matInput","","formControlName","gateway","placeholder","172.16.1.0"],["matInput","","formControlName","dns_server","placeholder","8.8.8.8"],["type","submit",1,"bg-green-600","text-white","p-3","font-semibold","rounded","hover:bg-green-700","transition-colors","disabled:bg-gray-400",3,"disabled"]],template:function(i,r){if(1&i&&(e.j41(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e.EFF(5," DHCP Networks "),e.k0s()(),e.j41(6,"li")(7,"div",5),e.qSk(),e.j41(8,"svg",6),e.nrm(9,"path",7),e.k0s(),e.joV(),e.j41(10,"a",8),e.EFF(11,"Add DHCP Networks"),e.k0s()()()()(),e.j41(12,"div",9)(13,"form",10),e.bIt("ngSubmit",function(){return r.onSubmit()}),e.j41(14,"mat-form-field",11)(15,"mat-label"),e.EFF(16,"Address"),e.k0s(),e.nrm(17,"input",12),e.DNE(18,y,2,0,"mat-error",13),e.k0s(),e.j41(19,"mat-form-field",11)(20,"mat-label"),e.EFF(21,"Gateaway"),e.k0s(),e.nrm(22,"input",14),e.DNE(23,N,2,0,"mat-error",13),e.k0s(),e.j41(24,"mat-form-field",11)(25,"mat-label"),e.EFF(26,"Dns Server"),e.k0s(),e.nrm(27,"input",15),e.DNE(28,S,2,0,"mat-error",13),e.k0s(),e.j41(29,"button",16),e.DNE(30,C,2,0,"span",13)(31,x,2,0,"span",13),e.k0s()()()()),2&i){let a,l,d;e.R7$(4),e.Y8G("routerLink",e.lJ4(8,b)),e.R7$(9),e.Y8G("formGroup",r.dhcpNetworkForm),e.R7$(5),e.Y8G("ngIf",(null==(a=r.dhcpNetworkForm.get("address"))||null==a.errors?null:a.errors.required)&&(null==(a=r.dhcpNetworkForm.get("address"))?null:a.touched)),e.R7$(5),e.Y8G("ngIf",(null==(l=r.dhcpNetworkForm.get("gateway"))||null==l.errors?null:l.errors.required)&&(null==(l=r.dhcpNetworkForm.get("gateway"))?null:l.touched)),e.R7$(5),e.Y8G("ngIf",(null==(d=r.dhcpNetworkForm.get("dns_server"))||null==d.errors?null:d.errors.required)&&(null==(d=r.dhcpNetworkForm.get("dns_server"))?null:d.touched)),e.R7$(),e.Y8G("disabled",!r.dhcpNetworkForm.valid||r.isSubmitting),e.R7$(),e.Y8G("ngIf",!r.isSubmitting),e.R7$(),e.Y8G("ngIf",r.isSubmitting)}},dependencies:[u.iI,u.Wk,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,n.YN,m.RG,m.rl,m.nJ,m.TL,k.m_,g.fS,g.fg,f.MD,f.bT,v.g7],encapsulation:2})}}return s})()}]}}]);