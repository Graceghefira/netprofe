"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7131],{57131:(w,m,o)=>{o.r(m),o.d(m,{default:()=>x});var f=o(10467),u=o(60177),e=o(54438),a=o(89417),n=o(30636),c=o(99213),p=o(59042),d=o(49192),h=o(22080),k=o(45794),v=o(10500),g=o(3366);const F=()=>["/dashboards/role-management"],x=[{path:"",component:(()=>{class s{constructor(r,t,i,l,E,b){this.roleService=r,this.fb=t,this.route=i,this.router=l,this.location=E,this._apiService=b,this.isLoading=!1,this.toast=(0,e.WQX)(k.tw)}ngOnInit(){var r=this;return(0,f.A)(function*(){if(r.userProfileFormEdit=r.fb.group({shared_users:["",a.k0.required],upload:["",a.k0.required],download:["",a.k0.required],link:["",[a.k0.required,a.k0.pattern(/^(https?:\/\/)?([\w-]+\.)*[\w-]+\.[a-z]{2,}(\/[\w-./?%&=]*)?$/i)]]}),r.route.paramMap.subscribe(t=>{r.profile_name=t.get("name")}),r.profile_name)try{const t=yield r._apiService.get(`/api/mikrotik/get-profile/${r.profile_name}`,!0),[i,l]=t.rate_limit.split("/");r.profile_datas=t,r.userProfileFormEdit.patchValue({profile_Name:r.profile_name,shared_users:r.profile_datas.shared_users,upload:i,download:l,link:r.profile_datas.link})}catch{r.toast.error("Failed Fetch Data","Error")}})()}onSubmit(){var r=this;return(0,f.A)(function*(){try{if(r.isLoading=!0,r.userProfileFormEdit.valid){const t=new FormData,i=`${r.userProfileFormEdit.value.upload}/${r.userProfileFormEdit.value.download}`;t.append("shared_users",r.userProfileFormEdit.value.shared_users),t.append("rate_limit",i),t.append("link",r.userProfileFormEdit.value.link);const l=yield r._apiService.post(`/api/mikrotik/hotspot-profile/${r.profile_name}`,t);console.log(l),"Hotspot profile and link updated successfully"==l.message?(r.userProfileFormEdit.disable(),r.userProfileFormEdit.reset(),r.isLoading=!1,r.location.back(),r.toast.success("Success Update User Profile","Success")):(r.toast.error("Failed Update User Profile","Error"),r.isLoading=!1)}else r.toast.info("Please fill in all required fields!","Error"),r.isLoading=!1}catch{r.toast.error("Failed Update User Profile","Error"),r.isLoading=!1}finally{r.isLoading=!1}})()}static{this.\u0275fac=function(t){return new(t||s)(e.rXU(v.W),e.rXU(a.ok),e.rXU(d.nX),e.rXU(d.Ix),e.rXU(u.aZ),e.rXU(g.G))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-form-edit"]],decls:33,vars:8,consts:[[1,"h-full","w-full"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"rtl:rotate-180","block","w-3","h-3","mx-1","text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[1,"ms-1","text-sm","font-medium","text-gray-700","hover:text-blue-600","md:ms-2","dark:text-gray-400","dark:hover:text-white"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,"p-3"],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4","shadow",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","shared_users",3,"placeholder"],["matInput","","formControlName","upload",3,"placeholder"],["matInput","","formControlName","download",3,"placeholder"],["matInput","","formControlName","link",3,"placeholder"],[1,"bg-blue-600","text-white","p-2","font-semibold","rounded",3,"click"]],template:function(t,i){1&t&&(e.j41(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e.EFF(5," Hotspot User Profile "),e.k0s()(),e.j41(6,"li")(7,"div",5),e.qSk(),e.j41(8,"svg",6),e.nrm(9,"path",7),e.k0s(),e.joV(),e.j41(10,"a",8),e.EFF(11,"Tambah User Profile"),e.k0s()()()()(),e.nrm(12,"ion-loading",9),e.j41(13,"div",10)(14,"form",11)(15,"mat-form-field",12)(16,"mat-label"),e.EFF(17,"Shared User"),e.k0s(),e.nrm(18,"input",13),e.k0s(),e.j41(19,"mat-form-field",12)(20,"mat-label"),e.EFF(21,"Upload"),e.k0s(),e.nrm(22,"input",14),e.k0s(),e.j41(23,"mat-form-field",12)(24,"mat-label"),e.EFF(25,"Download"),e.k0s(),e.nrm(26,"input",15),e.k0s(),e.j41(27,"mat-form-field",12)(28,"mat-label"),e.EFF(29,"Direct Link"),e.k0s(),e.nrm(30,"input",16),e.k0s(),e.j41(31,"button",17),e.bIt("click",function(){return i.onSubmit()}),e.EFF(32," Edit User Profile "),e.k0s()()()()),2&t&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(7,F)),e.R7$(8),e.Y8G("isOpen",i.isLoading),e.R7$(2),e.Y8G("formGroup",i.userProfileFormEdit),e.R7$(4),e.Y8G("placeholder","Berapa Akun yang Bisa Tersambung ?"),e.R7$(4),e.Y8G("placeholder","10M"),e.R7$(4),e.Y8G("placeholder","10M"),e.R7$(4),e.Y8G("placeholder","https://awh.co.id/"))},dependencies:[d.Wk,n.RG,n.rl,n.nJ,a.YN,a.qT,a.me,a.BC,a.cb,p.fS,p.fg,a.X1,a.j4,a.JD,u.MD,c.m_,h.rQ],encapsulation:2})}}return s})()}]}}]);