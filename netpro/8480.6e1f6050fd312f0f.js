"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8480],{18480:(_,v,a)=>{a.r(v),a.d(v,{default:()=>G});var p=a(10467),f=a(60177),o=a(89417),g=a(82765),d=a(30636),F=a(99213),S=a(59042),h=a(49192),e=a(54438),b=a(42641),k=a(95416);const C=()=>["/dashboards/dhcp"];function E(n,s){1&n&&(e.j41(0,"mat-error"),e.EFF(1," DHCP Name is required "),e.k0s())}function x(n,s){if(1&n&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&n){const r=s.$implicit;e.R7$(),e.SpI(" ",r.name," ")}}function I(n,s){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Lease time is required "),e.k0s())}function j(n,s){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Invalid time format. Use HH:MM:SS "),e.k0s())}function y(n,s){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Address pool is required "),e.k0s())}function D(n,s){1&n&&(e.j41(0,"span"),e.EFF(1,"Create DHCP Server"),e.k0s())}function $(n,s){1&n&&(e.j41(0,"span"),e.EFF(1,"Creating..."),e.k0s())}const G=[{path:"",component:(()=>{class n{constructor(r,i,t,l,m){this.fb=r,this.dhcpService=i,this.router=t,this.snackBar=l,this.route=m,this.isSubmitting=!1,this.availableInterfaces=[],this.availableInterfaces$=this.dhcpService.availableInterfaces$,this.dhcpData$=this.dhcpService.dhcpServerId$,this.isDisabled=!0}ngOnInit(){var r=this;return(0,p.A)(function*(){console.log(r.availableInterfaces$),r.initializeForm(),r.route.paramMap.subscribe(i=>{r.name=i.get("name"),r.fetchData()})})()}fetchData(){var r=this;return(0,p.A)(function*(){r.subscription=r.dhcpData$.subscribe(function(){var i=(0,p.A)(function*(t){if(t&&(0===t.length||String(t.gateway)!==String(r.name))){const l=yield r.dhcpService.getDhcpByName(r.name);r.dhcpData=l.dhcpServer[0],r.patchFormWithData(r.dhcpData)}});return function(t){return i.apply(this,arguments)}}())})()}patchFormWithData(r){this.dhcpServerForm.patchValue({name:r.name,interface:r.interface,lease_time:r["lease-time"],address_pool:r["address-pool"]})}initializeForm(){this.dhcpServerForm=this.fb.group({name:[{value:null,disabled:!0},o.k0.required],interface:[null,o.k0.required],lease_time:[null,o.k0.required],address_pool:[null,o.k0.required],add_arp:[!1]})}onSubmit(){var r=this;return(0,p.A)(function*(){if(r.dhcpServerForm.valid&&!r.isSubmitting){r.isSubmitting=!0;const i={name:r.name,interface:r.dhcpServerForm.value.interface,lease_time:r.dhcpServerForm.value.lease_time,address_pool:r.dhcpServerForm.value.address_pool,add_arp:r.dhcpServerForm.value.add_arp};console.log(i);try{const t=yield r.dhcpService.postDhcp(i);console.log(t),t&&(r.snackBar.open("DHCP Server created successfully","Close",{duration:3e3}),yield r.router.navigateByUrl("/dashboards/dhcp"))}catch(t){console.error("Error creating DHCP Server:",t),r.snackBar.open("Error creating DHCP Server","Close",{duration:3e3})}finally{r.isSubmitting=!1}}})()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(o.ok),e.rXU(b.S),e.rXU(h.Ix),e.rXU(k.UG),e.rXU(h.nX))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-form-edit"]],decls:45,vars:14,consts:[[1,"h-full","w-full","pb-15"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"rtl:rotate-180","block","w-3","h-3","mx-1","text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[1,"ms-1","text-sm","font-medium","text-gray-700","hover:text-blue-600","md:ms-2","dark:text-gray-400","dark:hover:text-white"],[1,"p-3"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4","shadow",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full","mb-2"],["matInput","","formControlName","name","placeholder","e.g. dhcp5"],[4,"ngIf"],[1,"gt-xs:pr-3","mb-2","flex-auto"],["matNativeControl","","formControlName","interface"],[4,"ngFor","ngForOf"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","","formControlName","lease_time","placeholder","00:20:00","pattern","\\d{2}:\\d{2}:\\d{2}"],["appearance","outline",1,"w-full","mt-2"],["matInput","","formControlName","address_pool","placeholder","e.g. dhcp_pool5"],[1,"w-full","mb-4"],["formControlName","add_arp"],["type","submit",1,"bg-green-600","text-white","p-2","rounded","hover:bg-green-700","transition-colors","disabled:bg-gray-400",3,"disabled"]],template:function(i,t){if(1&i&&(e.j41(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e.EFF(5," DHCP Server "),e.k0s()(),e.j41(6,"li")(7,"div",5),e.qSk(),e.j41(8,"svg",6),e.nrm(9,"path",7),e.k0s(),e.joV(),e.j41(10,"a",8),e.EFF(11,"Add DHCP Server"),e.k0s()()()()(),e.j41(12,"div",9)(13,"form",10),e.bIt("ngSubmit",function(){return t.onSubmit()}),e.j41(14,"mat-form-field",11)(15,"mat-label"),e.EFF(16,"DHCP Name"),e.k0s(),e.nrm(17,"input",12),e.DNE(18,E,2,0,"mat-error",13),e.k0s(),e.j41(19,"mat-form-field",14)(20,"mat-label"),e.EFF(21,"Interface"),e.k0s(),e.j41(22,"select",15),e.DNE(23,x,2,1,"option",16),e.nI1(24,"async"),e.k0s(),e.nrm(25,"mat-icon",17),e.k0s(),e.j41(26,"mat-form-field",11)(27,"mat-label"),e.EFF(28,"Lease Time"),e.k0s(),e.nrm(29,"input",18),e.j41(30,"mat-hint"),e.EFF(31,"Format: HH:MM:SS (e.g. 00:20:00)"),e.k0s(),e.DNE(32,I,2,0,"mat-error",13)(33,j,2,0,"mat-error",13),e.k0s(),e.j41(34,"mat-form-field",19)(35,"mat-label"),e.EFF(36,"Address Pool"),e.k0s(),e.nrm(37,"input",20),e.DNE(38,y,2,0,"mat-error",13),e.k0s(),e.j41(39,"div",21)(40,"mat-checkbox",22),e.EFF(41," Add ARP "),e.k0s()(),e.j41(42,"button",23),e.DNE(43,D,2,0,"span",13)(44,$,2,0,"span",13),e.k0s()()()()),2&i){let l,m,c,u;e.R7$(4),e.Y8G("routerLink",e.lJ4(13,C)),e.R7$(9),e.Y8G("formGroup",t.dhcpServerForm),e.R7$(5),e.Y8G("ngIf",(null==(l=t.dhcpServerForm.get("name"))||null==l.errors?null:l.errors.required)&&(null==(l=t.dhcpServerForm.get("name"))?null:l.touched)),e.R7$(5),e.Y8G("ngForOf",e.bMT(24,11,t.availableInterfaces$)),e.R7$(2),e.Y8G("svgIcon","heroicons_solid:map-pin"),e.R7$(7),e.Y8G("ngIf",(null==(m=t.dhcpServerForm.get("lease_time"))||null==m.errors?null:m.errors.required)&&(null==(m=t.dhcpServerForm.get("lease_time"))?null:m.touched)),e.R7$(),e.Y8G("ngIf",(null==(c=t.dhcpServerForm.get("lease_time"))||null==c.errors?null:c.errors.pattern)&&(null==(c=t.dhcpServerForm.get("lease_time"))?null:c.touched)),e.R7$(5),e.Y8G("ngIf",(null==(u=t.dhcpServerForm.get("address_pool"))||null==u.errors?null:u.errors.required)&&(null==(u=t.dhcpServerForm.get("address_pool"))?null:u.touched)),e.R7$(4),e.Y8G("disabled",!t.dhcpServerForm.valid||t.isSubmitting),e.R7$(),e.Y8G("ngIf",!t.isSubmitting),e.R7$(),e.Y8G("ngIf",t.isSubmitting)}},dependencies:[h.iI,h.Wk,o.X1,o.qT,o.xH,o.y7,o.me,o.wz,o.BC,o.cb,o.R_,o.j4,o.JD,o.YN,d.RG,d.rl,d.nJ,d.MV,d.TL,d.JW,F.m_,F.An,S.fS,S.fg,f.MD,f.Sq,f.bT,f.Jj,g.g7,g.So],encapsulation:2})}}return n})()}]}}]);