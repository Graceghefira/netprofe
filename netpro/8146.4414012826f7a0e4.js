"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8146],{18146:($,p,a)=>{a.r(p),a.d(p,{default:()=>G});var h=a(10467),u=a(60177),e=a(54438),n=a(89417),m=a(30636),v=a(99213),g=a(59042),f=a(49192),F=a(22080),b=a(45794),k=a(70600),x=a(65706),y=a(25798),j=a(46601),C=a(84412);let I=(()=>{class o{showAlert(t,r){this.alertSubject.next({message:t,title:r}),setTimeout(()=>{this.clearAlert()},5e3)}clearAlert(){this.alertSubject.next(null)}constructor(){this.alertSubject=new C.t(null),this.alert$=this.alertSubject.asObservable()}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const S=()=>["/dashboards/customer"];function A(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"NIK / Nomer HP wajib diisi"),e.k0s())}function N(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Format NIK / Nomer HP tidak valid (harus 10-12 digit angka)"),e.k0s())}function E(o,c){1&o&&(e.j41(0,"mat-error"),e.EFF(1,"Nama wajib diisi"),e.k0s())}function w(o,c){if(1&o&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&o){const t=c.$implicit;e.Y8G("value",t.profile_name),e.R7$(),e.SpI(" ",t.profile_name," ")}}const G=[{path:"",component:(()=>{class o{constructor(t,r,i,s,l,d,D,T,R){this.platform=t,this.router=r,this.fb=i,this.roleService=s,this.userService=l,this.route=d,this.location=D,this.fuseConfirmationService=T,this.alertService=R,this.roleDatas=[],this.isLoading=!1,this.toast=(0,e.WQX)(b.tw)}ngOnInit(){this.userForm=this.fb.group({no_hp:["",[n.k0.required,n.k0.pattern(/^[0-9]+$/)]],name:["",n.k0.required],profile:["",n.k0.required]}),this.platform.backButton.subscribeWithPriority(10,()=>{this.router.navigate(["/dashboard/customer"])}),this.userForm.patchValue({profile:"default"}),this.getRole()}getRole(){var t=this;return(0,h.A)(function*(){const r=yield t.roleService.getProfile();console.log(r),t.roleDatas=r.profiles})()}onSubmit(){var t=this;return(0,h.A)(function*(){try{if(t.isLoading=!0,t.userForm.valid){const r=new FormData;r.append("no_hp",t.userForm.value.no_hp),r.append("name",t.userForm.value.name),r.append("profile",t.userForm.value.profile);const i=yield t.userService.addUsers(r);console.log(i),"User baru ditambahkan tanpa expiry time."!==i.message?t.fuseConfirmationService.open({title:"Notification",message:"The user data already exists on the server. Would you like to create another account anyway?",icon:{color:"error"},actions:{confirm:{label:"Confirmation",color:"warn"}}}):(t.userForm.reset(),t.userForm.disable(),t.location.back(),t.alertService.showAlert("success","Form submitted successfully!"))}else console.log("invalid form"),t.alertService.showAlert("error","Please fill in all required fields!")}catch{t.toast.error("Failed to submit form","Error")}finally{t.isLoading=!1}})()}preventInvalidChars(t){t.target.value=t.target.value.replace(/[^0-9]/g,"")}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(k.OD),e.rXU(f.Ix),e.rXU(n.ok),e.rXU(x.W),e.rXU(y.D),e.rXU(f.Ix),e.rXU(u.aZ),e.rXU(j.G),e.rXU(I))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-form-add"]],decls:34,vars:11,consts:[[1,"h-full","w-full"],["aria-label","Breadcrumb",1,"flex","shadow","px-5","py-3","text-gray-700","borde","bg-white","dark:bg-slate-800"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"inline-flex","items-center","text-sm","font-medium","text-gray-700","hover:text-blue-600","dark:text-gray-400","dark:hover:text-white",3,"routerLink"],[1,"flex","items-center"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 6 10",1,"rtl:rotate-180","block","w-3","h-3","mx-1","text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 9 4-4-4-4"],[1,"ms-1","text-sm","font-medium","text-gray-700","hover:text-blue-600","md:ms-2","dark:text-gray-400","dark:hover:text-white"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,"p-3"],[1,"bg-card","mt-2","flex","flex-col","overflow-hidden","rounded-2xl","p-8","pb-4","shadow",3,"formGroup"],["floatLabel","always",1,"w-full","mb-2"],["matInput","","formControlName","no_hp","type","number",3,"input","placeholder"],[4,"ngIf"],["matInput","","formControlName","name",3,"placeholder"],[1,"gt-xs:pr-3","mb-2","flex-auto"],["matNativeControl","","formControlName","profile"],[3,"value",4,"ngFor","ngForOf"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[1,"bg-green-600","text-white","p-2","rounded",3,"click"],[3,"value"]],template:function(r,i){if(1&r&&(e.j41(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e.EFF(5," Hotspot Users "),e.k0s()(),e.j41(6,"li")(7,"div",5),e.qSk(),e.j41(8,"svg",6),e.nrm(9,"path",7),e.k0s(),e.joV(),e.j41(10,"a",8),e.EFF(11,"Tambah Akun"),e.k0s()()()()(),e.nrm(12,"ion-loading",9),e.j41(13,"div",10)(14,"form",11)(15,"mat-form-field",12)(16,"mat-label"),e.EFF(17,"NIK / Nomer Hp"),e.k0s(),e.j41(18,"input",13),e.bIt("input",function(l){return i.preventInvalidChars(l)}),e.k0s(),e.DNE(19,A,2,0,"mat-error",14)(20,N,2,0,"mat-error",14),e.k0s(),e.j41(21,"mat-form-field",12)(22,"mat-label"),e.EFF(23,"Nama Pengguna"),e.k0s(),e.nrm(24,"input",15),e.DNE(25,E,2,0,"mat-error",14),e.k0s(),e.j41(26,"mat-form-field",16)(27,"mat-label"),e.EFF(28,"Profile Akun"),e.k0s(),e.j41(29,"select",17),e.DNE(30,w,2,2,"option",18),e.k0s(),e.nrm(31,"mat-icon",19),e.k0s(),e.j41(32,"button",20),e.bIt("click",function(){return i.onSubmit()}),e.EFF(33," Tambah Akun "),e.k0s()()()()),2&r){let s,l,d;e.R7$(4),e.Y8G("routerLink",e.lJ4(10,S)),e.R7$(8),e.Y8G("isOpen",i.isLoading),e.R7$(2),e.Y8G("formGroup",i.userForm),e.R7$(4),e.Y8G("placeholder","NIK / Nomer HP"),e.R7$(),e.Y8G("ngIf",null==(s=i.userForm.get("no_hp"))?null:s.hasError("required")),e.R7$(),e.Y8G("ngIf",null==(l=i.userForm.get("no_hp"))?null:l.hasError("pattern")),e.R7$(4),e.Y8G("placeholder","Nama Pengguna"),e.R7$(),e.Y8G("ngIf",null==(d=i.userForm.get("name"))?null:d.hasError("required")),e.R7$(5),e.Y8G("ngForOf",i.roleDatas),e.R7$(),e.Y8G("svgIcon","heroicons_solid:map-pin")}},dependencies:[f.Wk,m.RG,m.rl,m.nJ,m.TL,m.JW,n.YN,n.qT,n.xH,n.y7,n.me,n.Q0,n.wz,n.BC,n.cb,g.fS,g.fg,n.X1,n.j4,n.JD,u.MD,u.Sq,u.bT,v.m_,v.An,F.rQ],encapsulation:2})}}return o})()}]}}]);